<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ni9ne.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="SQL分类SQL语言在功能上主要分为如下3大类：  DDL DDL（Data Definition Languages, 数据定义语言），这些语句定义了不同的数据库、表、视图、索引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。 主要的语句关键字包括 CREATE 、 DROP 、 ALTER 等。  DML DML（Data Manipulation Language, 数据操作语">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL基础">
<meta property="og:url" content="https://ni9ne.github.io/2022/07/12/MySql/MySQL%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="NI9NE&#39;s Zone">
<meta property="og:description" content="SQL分类SQL语言在功能上主要分为如下3大类：  DDL DDL（Data Definition Languages, 数据定义语言），这些语句定义了不同的数据库、表、视图、索引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。 主要的语句关键字包括 CREATE 、 DROP 、 ALTER 等。  DML DML（Data Manipulation Language, 数据操作语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/7ee8a713c20a11a3b10145a16cbb7bbd-526d560.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/56f18a97f0e6c097ba06e11f038bd67d-e288d95.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5e6cae893bd7d78dfb696145b59d3aa5-9a266ee.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/25a71c1f12f8dcaa6574a0cb1143f3af-3e065df.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8cbed56f1a965a9b84580518ee5fbf15-a237fb6.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8da1e7dc5d3f822ac9b320a24f45b0cb-0a1db98.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/86e1e52f8bf134eb1d43d9ad543d63da-a9447ba.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/93ee0ae3b31e51102d07946e84a2e331-1416223.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/13b411c50c56a379bf0707e736192bc8-35800d2.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a5863d6d94f192f15b51434cd5242820-211b3b8.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/689b17db860235d7c8247d54f0a16a67-2424ada.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/1cf296866e06b4f21b040cb70e7a5614-6e14801.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/511808d6855885c516350be6c0890cf4-4603021.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/65e3aae55c3d6cfb54fe3f4e21b277ac-90a6a56.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8b6252cb8a4db3ed9261a6b043647f03-8411a57.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/083e9780c3370007e04a93ff60f11b93-e5e93d4.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f9e403b47cd9a7d0e2ddb7ae100ab46e-14ef01b.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/72ffd747c57da1fdc0a62ff9455fab22-17653cc.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a0f91db337374e536331a127518db191-7d97ea9.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/989392f1dc8b9a89703cf8dcdbcc5791-5fa0bfa.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5c8518a1f41cb925803acb40e7bf85af-c6e8910.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2a1b89a33731acb4abfee6eead655474-ef949f3.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/d9526563a808aa2bb6064efc1ad107f8-8db7393.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a213ee77ca2dc1386b1b6eca88d72be3-8437a5c.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/db798bc395ccf50ea941f02f6e840870-2409781.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/bbbae16149e3ecff74a34c22dd0d21c1-03e7f79.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/3977f4622d2e174c49baadbf248b000f-9900f92.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8b0d05e9bb44638f0ee080628e6af7e4-9312172.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/9dfac63ec776e6735184c4e9254c7a3f-b8f2689.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/3af6ea4802347da0d64b046919c25d18-882e3bc.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/38b6127cddb1dd0925396e7ea31db5bc-ed94968.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/d853fafde5669486800d47f66b494e48-a876385.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/3bb4db041c21281a42825822c642c84c-9a59222.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f5bca1efda8dc5b5edaaf0f5787ae394-b94aaf7.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5615db74db433691532999a50e0ae891-7b295c2.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/808dcab2e61529ce934d4543def80043-aafd8db.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/931110c751cc58f92e897617a57b80c6-1f3fb8f.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/4c3c6faaf104a27b490b0343dde89423-2d49fa0.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f2de7e76b39e7fd6e3fc41c57305c31e-7ae0da0.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/6826fc71dcfa36f03f7a72dda820e6f6-9916815.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5eed3199770bf0af80d697ce98df3e95-2976588.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2a4a8f23fd36566e626f5dbd967addd4-6ccef1c.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/4b7b74ccb638f8cbfa0de08db3c01f43-2757fec.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5431f8decdd870150d1e335435b6c1c5-2f091ea.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f27a751254afb237adedbc80578768c9-08aca16.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/4aa7ecb5ef74032876f671b11f8fa2df-7a2949d.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/39ef9b6c3aaff0fe81add12a5e380a10-8c357b4.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2676c9b6eb72c184990c8e03a03ea6f1-bfb6159.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2ac627268b214c85dbe26d13f1f1debf-e7b59b0.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8826d8585990d50d863b4c21d91b0829-18acb61.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/97adfc0b78a3e2fb30f84839e4e07bd7-3a498c6.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/dbc51b202250a992a589b3437074dc3b-315443f.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/456ebd13bfc0800684cf2dc37ee6034d-4a6f291.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2bdd5ec64f9c13ffaf7341cafe14574b-12192ff.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/58542c5e20c48f14bfac27dd34926c7c-26e92eb.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/ffd2f0fdd076e15166feb900c1237dbd-bce4fff.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/06eeda1896341f336de56c9d2d479af3-59d544a.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/c614c7ec461a46bff9711fe282da7aa7-b65701c.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/34de1b0cfa18f40716059232a78abc6e-ddbf100.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/0d33119ab35af3c54266157e3f6d7e46-685723f.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/c138fdc2c606340c06eba10ffd3f19f3-b87c761.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/d1f150388b55b7629b82c24fe51f6852-f0d198f.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/db8ddca1f2e68a9171a6e36ad4be0e71-30f5961.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/e8a93d8e3554ac398a5beed445dac42b-58499ec.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a2cc0340f66205bce44c8b152ab96eb8-cd17406.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/19a214c3ca1f8f45c1ca7c330b321f0f-58b7eaa.png">
<meta property="og:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/c5566878b8fb3db9274efea9a3300d06-f7e2dfe.png">
<meta property="article:published_time" content="2022-07-12T12:43:11.000Z">
<meta property="article:modified_time" content="2022-09-04T09:33:51.893Z">
<meta property="article:author" content="NI9NE">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/7ee8a713c20a11a3b10145a16cbb7bbd-526d560.png">


<link rel="canonical" href="https://ni9ne.github.io/2022/07/12/MySql/MySQL%E5%9F%BA%E7%A1%80/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://ni9ne.github.io/2022/07/12/MySql/MySQL%E5%9F%BA%E7%A1%80/","path":"2022/07/12/MySql/MySQL基础/","title":"MySQL基础"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>MySQL基础 | NI9NE's Zone</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">NI9NE's Zone</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">52</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">106</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="nav-number">1.</span> <span class="nav-text">SQL分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">通用语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%A7%84%E5%88%99"><span class="nav-number">2.1.</span> <span class="nav-text">基本规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E5%A4%A7%E5%B0%8F%E5%86%99%E8%A7%84%E8%8C%83"><span class="nav-number">2.2.</span> <span class="nav-text">SQL大小写规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A"><span class="nav-number">2.3.</span> <span class="nav-text">注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">3.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">3.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">3.2.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E7%AC%A6%E5%8F%B7%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">3.3.</span> <span class="nav-text">非符号类型的运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">3.4.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">3.5.</span> <span class="nav-text">位运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A9%BA%E5%80%BC%E5%8F%82%E4%B8%8E%E8%BF%90%E7%AE%97"><span class="nav-number">3.6.</span> <span class="nav-text">空值参与运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">3.7.</span> <span class="nav-text">运算符的优先级</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DDL"><span class="nav-number">4.</span> <span class="nav-text">DDL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-number">4.1.</span> <span class="nav-text">数据库操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">4.2.</span> <span class="nav-text">表操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C-%E6%9F%A5%E8%AF%A2%E5%88%9B%E5%BB%BA"><span class="nav-number">4.2.1.</span> <span class="nav-text">表操作-查询创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.2.2.</span> <span class="nav-text">表操作-数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">数值类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.2.2.2.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.2.2.3.</span> <span class="nav-text">日期时间类型</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C-%E6%A1%88%E4%BE%8B"><span class="nav-number">4.2.3.</span> <span class="nav-text">表操作-案例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C-%E4%BF%AE%E6%94%B9"><span class="nav-number">4.2.4.</span> <span class="nav-text">表操作-修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C-%E5%88%A0%E9%99%A4"><span class="nav-number">4.2.5.</span> <span class="nav-text">表操作-删除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DML"><span class="nav-number">5.</span> <span class="nav-text">DML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="nav-number">5.1.</span> <span class="nav-text">添加数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="nav-number">5.2.</span> <span class="nav-text">修改数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">5.3.</span> <span class="nav-text">删除数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DQL"><span class="nav-number">6.</span> <span class="nav-text">DQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">6.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.2.</span> <span class="nav-text">基础查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="nav-number">6.2.1.</span> <span class="nav-text">查询多个字段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E6%AE%B5%E8%AE%BE%E7%BD%AE%E5%88%AB%E5%90%8D"><span class="nav-number">6.2.2.</span> <span class="nav-text">字段设置别名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95"><span class="nav-number">6.2.3.</span> <span class="nav-text">去除重复记录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.3.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">6.4.</span> <span class="nav-text">聚合函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.5.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.6.</span> <span class="nav-text">排序查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.7.</span> <span class="nav-text">分页查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-number">6.8.</span> <span class="nav-text">执行顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="nav-number">6.9.</span> <span class="nav-text">执行原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DCL"><span class="nav-number">7.</span> <span class="nav-text">DCL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7"><span class="nav-number">7.1.</span> <span class="nav-text">管理用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="nav-number">7.2.</span> <span class="nav-text">权限控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">8.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.</span> <span class="nav-text">数值函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.1.</span> <span class="nav-text">基本函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.2.</span> <span class="nav-text">三角函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E6%95%B0%E5%AF%B9%E6%95%B0%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.3.</span> <span class="nav-text">指数对数函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.4.</span> <span class="nav-text">进制转换函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">8.2.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.</span> <span class="nav-text">日期和时间函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%97%A5%E6%9C%9F%E3%80%81%E6%97%B6%E9%97%B4"><span class="nav-number">8.3.1.</span> <span class="nav-text">获取日期、时间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4%E6%88%B3%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">8.3.2.</span> <span class="nav-text">日期与时间戳的转换</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%88%E4%BB%BD%E3%80%81%E6%98%9F%E6%9C%9F%E3%80%81%E6%98%9F%E6%9C%9F%E6%95%B0%E3%80%81%E5%A4%A9%E6%95%B0%E7%AD%89%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.3.</span> <span class="nav-text">获取月份、星期、星期数、天数等函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%9A%84%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.4.</span> <span class="nav-text">日期的操作函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%92%8C%E7%A7%92%E9%92%9F%E8%BD%AC%E6%8D%A2%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.5.</span> <span class="nav-text">时间和秒钟转换的函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.6.</span> <span class="nav-text">计算日期和时间的函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%8E%E8%A7%A3%E6%9E%90"><span class="nav-number">8.3.7.</span> <span class="nav-text">日期的格式化与解析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="nav-number">8.4.</span> <span class="nav-text">流程控制函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86%E5%87%BD%E6%95%B0"><span class="nav-number">8.5.</span> <span class="nav-text">加密与解密函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL%E4%BF%A1%E6%81%AF%E5%87%BD%E6%95%B0"><span class="nav-number">8.6.</span> <span class="nav-text">MySQL信息函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="nav-number">8.7.</span> <span class="nav-text">其他函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">9.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.1.1.</span> <span class="nav-text">非空约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.1.2.</span> <span class="nav-text">唯一性约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.1.3.</span> <span class="nav-text">主键约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%A2%9E%E5%88%97"><span class="nav-number">9.1.4.</span> <span class="nav-text">自增列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.1.5.</span> <span class="nav-text">外键约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E7%AD%89%E7%BA%A7"><span class="nav-number">9.1.6.</span> <span class="nav-text">外键约束等级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.1.7.</span> <span class="nav-text">默认值约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E4%BD%BF%E7%94%A8"><span class="nav-number">9.2.</span> <span class="nav-text">约束使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="nav-number">10.1.</span> <span class="nav-text">等值连接&#x2F;非等值连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="nav-number">10.2.</span> <span class="nav-text">自连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5-%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">10.3.</span> <span class="nav-text">内连接&#x2F;外连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UNION%E4%BD%BF%E7%94%A8"><span class="nav-number">10.4.</span> <span class="nav-text">UNION使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7%E7%A7%8D-JOINS%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">10.5.</span> <span class="nav-text">7种 JOINS的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5"><span class="nav-number">10.6.</span> <span class="nav-text">自然连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#USING"><span class="nav-number">10.7.</span> <span class="nav-text">USING</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%B3%A8%E6%84%8F"><span class="nav-number">10.8.</span> <span class="nav-text">多表连接注意</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%A4%BA%E4%BE%8B"><span class="nav-number">10.9.</span> <span class="nav-text">多表查询示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%88%86%E7%B1%BB"><span class="nav-number">11.1.</span> <span class="nav-text">子查询分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.2.</span> <span class="nav-text">相关子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#EXISTS-%E4%B8%8E-NOT-EXISTS%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">11.2.1.</span> <span class="nav-text">EXISTS 与 NOT EXISTS关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%9B%B4%E6%96%B0"><span class="nav-number">11.2.2.</span> <span class="nav-text">相关更新</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E5%88%A0%E9%99%A4"><span class="nav-number">11.2.3.</span> <span class="nav-text">相关删除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">12.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">12.1.</span> <span class="nav-text">事务操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="nav-number">12.2.</span> <span class="nav-text">事务四大特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="nav-number">12.3.</span> <span class="nav-text">并发事务问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%84%8F%E8%AF%BB"><span class="nav-number">12.3.1.</span> <span class="nav-text">脏读</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="nav-number">12.3.2.</span> <span class="nav-text">不可重复读</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%BB%E8%AF%BB"><span class="nav-number">12.3.3.</span> <span class="nav-text">幻读</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">12.4.</span> <span class="nav-text">事务隔离级别</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="NI9NE"
      src="/images/favicon/mstile-150x150.png">
  <p class="site-author-name" itemprop="name">NI9NE</p>
  <div class="site-description" itemprop="description">TECH OTAKU SAVE THE WORLD</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">106</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ni9ne" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ni9ne" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/ni9ne" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;ni9ne" rel="noopener" target="_blank"><i class="fab fa-git fa-fw"></i>Gitee</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://unpkg.com/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://gitee.com/ni9ne" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ni9ne.github.io/2022/07/12/MySql/MySQL%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon/mstile-150x150.png">
      <meta itemprop="name" content="NI9NE">
      <meta itemprop="description" content="TECH OTAKU SAVE THE WORLD">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NI9NE's Zone">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL基础
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-12 20:43:11" itemprop="dateCreated datePublished" datetime="2022-07-12T20:43:11+08:00">2022-07-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><p>SQL语言在功能上主要分为如下3大类：</p>
<ul>
<li><p>DDL</p>
<p><strong>DDL</strong>（<strong>Data Definition Languages</strong>, 数据定义语言），这些语句定义了不同的数据库、表、视图、索<br>引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。</p>
<p>主要的语句关键字包括 <code>CREATE</code> 、 <code>DROP</code> 、 <code>ALTER</code> 等。</p>
</li>
<li><p>DML</p>
<p><strong>DML</strong>（<strong>Data Manipulation Language</strong>, 数据操作语言），用于添加、删除、更新和查询数据库记<br>录，并检查数据完整性。</p>
<p>主要的语句关键字包括 <code>INSERT</code> 、 <code>DELETE </code>、 <code>UPDATE</code> 、 <code>SELECT</code> 等。</p>
</li>
<li><p>DCL</p>
<p><strong>DCL</strong>（<strong>Data Control Language</strong>, 数据控制语言），用于定义数据库、表、字段、用户的访问权限和<br>安全级别。<br>主要的语句关键字包括 <code>GRANT </code>、 <code>REVOKE </code>、 <code>COMMIT</code> 、 <code>ROLLBACK</code> 、 <code>SAVEPOINT</code> 等。</p>
</li>
</ul>
<h2 id="通用语法"><a href="#通用语法" class="headerlink" title="通用语法"></a>通用语法</h2><h3 id="基本规则"><a href="#基本规则" class="headerlink" title="基本规则"></a>基本规则</h3><ul>
<li>SQL 可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进</li>
<li>每条命令以 <code>; </code>或 <code>\g</code> 或 <code>\G</code> 结束</li>
<li>关键字不能被缩写也不能分行</li>
<li>关于标点符号<ul>
<li>必须保证所有的<code>()</code>、单引号<code>&#39;&#39;</code>、双引号<code>&quot;&quot;</code>是成对结束的</li>
<li>必须使用英文状态下的半角输入方式</li>
<li>字符串型和日期时间类型的数据可以使用单引号<code>&#39;&#39;</code>表示</li>
<li>列的别名，尽量使用双引号<code>&quot;&quot;</code>，而且不建议省略<code>as</code></li>
</ul>
</li>
</ul>
<h3 id="SQL大小写规范"><a href="#SQL大小写规范" class="headerlink" title="SQL大小写规范"></a>SQL大小写规范</h3><ul>
<li>MySQL 在 <strong>Windows</strong> 环境下是<strong>大小写不敏感</strong>的</li>
<li>MySQL 在 <strong>Linux</strong> 环境下是<strong>大小写敏感</strong>的<ul>
<li>数据库名、表名、表的别名、变量名是严格区分大小写的</li>
<li>关键字、函数名、列名(或字段名)、列的别名(字段的别名) 是忽略大小写的。</li>
</ul>
</li>
<li>推荐采用统一的书写规范：<ul>
<li>数据库名、表名、表别名、字段名、字段别名等都小写</li>
<li>SQL 关键字、函数名、绑定变量等都大写</li>
</ul>
</li>
</ul>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>可以使用如下格式的注释结构:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">单行注释：#注释文字</span><br><span class="line">单行注释：-- 注释文字(--后面必须包含一个空格。)</span><br><span class="line">多行注释：/* 注释文字 */</span><br></pre></td></tr></table></figure>

<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>算术运算符主要用于数学运算，其可以连接运算符前后的两个数值或表达式，对数值或表达式进行加（+）、减（-）、乘（*）、除（/）和取模（%）运算</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>名称</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>+</code></td>
<td>加法运算符</td>
<td>计算两个值或表达式的和</td>
<td><code>SELECT a + b</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>减法运算符</td>
<td>计算两个值或表达式的差</td>
<td><code>SELECT a - b</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘法运算符</td>
<td>计算两个值或表达式的乘积</td>
<td><code>SELECT a * b</code></td>
</tr>
<tr>
<td><code>/</code> 或 <code>DIV</code></td>
<td>除法运算符</td>
<td>计算两个值或表达式的商</td>
<td><code>SELECT a / b</code></td>
</tr>
<tr>
<td><code>%</code> 或 <code>MOD</code></td>
<td>取余(求模)运算符</td>
<td>计算两个值或表达式的余数</td>
<td><code>SELECT a % b</code></td>
</tr>
</tbody></table>
<p>运算规则</p>
<ul>
<li><p><strong>加/减法</strong></p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/7ee8a713c20a11a3b10145a16cbb7bbd-526d560.png" alt="image-20220705102340555"></p>
<p>由此可以得知:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 一个整数类型的值对整数进行加法和减法操作，结果还是一个整数；</span><br><span class="line">- 一个整数类型的值对浮点数进行加法和减法操作，结果是一个浮点数；</span><br><span class="line">- 在MySQL中+只表示数值相加。如果遇到非数值类型，先尝试转成数值，如果转失败，就按0计算。</span><br><span class="line">（补充：MySQL中字符串拼接要使用字符串函数CONCAT()实现）</span><br></pre></td></tr></table></figure></li>
<li><p><strong>乘/除法</strong></p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/56f18a97f0e6c097ba06e11f038bd67d-e288d95.png" alt="image-20220705102550438"></p>
<p>由此可以得知:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- 一个数乘以整数1和除以整数1后仍得原数；</span><br><span class="line">- 一个数乘以浮点数1和除以浮点数1后变成浮点数，数值与原数相等；</span><br><span class="line">- 一个数除以整数后，不管是否能除尽，结果都为一个浮点数；</span><br><span class="line">- 一个数除以另一个数，除不尽时，结果为一个浮点数，并保留到小数点后4位；</span><br><span class="line">- 乘法和除法的优先级相同，进行先乘后除操作与先除后乘操作，得出的结果相同。</span><br><span class="line">- 在数学运算中，0不能用作除数，在MySQL中，一个数除以0为NULL</span><br></pre></td></tr></table></figure></li>
<li><p><strong>取余</strong> </p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5e6cae893bd7d78dfb696145b59d3aa5-9a266ee.png" alt="image-20220705102749895"></p>
</li>
</ul>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p>比较运算符用来对表达式左边的操作数和右边的操作数进行比较，比较的结果为真则返回<code>1</code>，比较的结果为假则返回<code>0</code>，其他情况则返回<code>NULL</code>。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>名称</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>=</code></td>
<td>等于运算符</td>
<td>判断两个值、字符串或表达式是否相等</td>
<td><code>SELECT * FROM TABLE WHERE A = B</code></td>
</tr>
<tr>
<td><code>&lt;=&gt;</code></td>
<td>安全等于运算符</td>
<td>安全的判断两个值、字符串或表达式是否相等</td>
<td><code>SELECT * FROM TABLE WHERE A &lt;=&gt; B</code></td>
</tr>
<tr>
<td><code>&lt;&gt;</code> 或 <code>!=</code></td>
<td>不等于运算符</td>
<td>判断两个值、字符串或表达式是否不相等</td>
<td><code>SELECT * FROM TABLE WHERE A &lt;&gt; B</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于运算符</td>
<td>判断前面的值、字符串或表达式是否大于后面的</td>
<td><code>SELECT * FROM TABLE WHERE A &lt; B</code></td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>小于等于运算符</td>
<td>判断前面的值、字符串或表达式是否大于或等于后面的</td>
<td><code>SELECT * FROM TABLE WHERE A &lt;= B</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于运算符</td>
<td>判断前面的值、字符串或表达式是否小于后面的</td>
<td><code>SELECT * FROM TABLE WHERE A &gt; B</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>大于等于运算符</td>
<td>判断前面的值、字符串或表达式是否小于或等于后面的</td>
<td><code>SELECT * FROM TABLE WHERE A &gt;= B</code></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>等号运算符</strong></p>
<p>等号运算符（<code>=</code>）判断等号两边的值、字符串或表达式是否相等，如果相等则返回1，不相等则返回0。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/25a71c1f12f8dcaa6574a0cb1143f3af-3e065df.png" alt="image-20220705103744522"></p>
<p>在使用等号运算符时，遵循如下规则：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 如果等号两边的值、字符串或表达式都为字符串，则MySQL会按照字符串进行比较，其比较的是每个字符串中字符的ANSI编码是否相等。</span><br><span class="line">- 如果等号两边的值都是整数，则MySQL会按照整数来比较两个值的大小。</span><br><span class="line">- 如果等号两边的值一个是整数，另一个是字符串，则MySQL会将字符串转化为数字进行比较。</span><br><span class="line">- 如果等号两边的值、字符串或表达式中有一个为NULL，则比较结果为NULL。</span><br></pre></td></tr></table></figure></li>
<li><p><strong>安全等于运算符</strong></p>
<p>安全等于运算符（<code>&lt;=&gt;</code>）与等于运算符（<code>=</code>）的作用是相似的， 唯一的区别 是<code>&lt;=&gt;</code>可以用来对NULL进行判断。在两个操作数均为NULL时，其返回值为1，而不为NULL；当一个操作数为NULL时，其返回值为0，而不为NULL。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8cbed56f1a965a9b84580518ee5fbf15-a237fb6.png" alt="image-20220705104054544"></p>
</li>
<li><p><strong>不等于运算符</strong></p>
<p>不等于运算符（<code>&lt;&gt;</code>和<code>!=</code>）用于判断两边的数字、字符串或者表达式的值是否不相等，如果不相等则返回1，相等则返回0。<strong>不等于运算符不能判断NULL值</strong>。如果两边的值有任意一个为NULL，或两边都为NULL，则结果为NULL。 SQL语句示例如下：</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8da1e7dc5d3f822ac9b320a24f45b0cb-0a1db98.png" alt="image-20220705104218469"></p>
</li>
</ul>
<h3 id="非符号类型的运算符"><a href="#非符号类型的运算符" class="headerlink" title="非符号类型的运算符"></a>非符号类型的运算符</h3><table>
<thead>
<tr>
<th>运算符</th>
<th>名称</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>IS NULL</code></td>
<td>为空运算符</td>
<td>判断值、字符串或表达式是否为空</td>
<td><code>SELECT B FROM TABLE WHERE A IS NULL</code></td>
</tr>
<tr>
<td><code>ISNOTNULL</code></td>
<td>不为空运算符</td>
<td>判断值、字符串或表达式是否不为空</td>
<td><code>SELECT B FROM TABLE WHERE A IS NOT NULL</code></td>
</tr>
<tr>
<td><code>LEAST</code></td>
<td>最小值运算符</td>
<td>在多个值中返回最小值</td>
<td><code>SELECT LEAST(A,B,C)</code></td>
</tr>
<tr>
<td><code>GREATEST</code></td>
<td>最大值运算符</td>
<td>在多个值中返回最大值</td>
<td><code>SELECT GREATEST(A,B,C)</code></td>
</tr>
<tr>
<td><code>BETWEEN AND</code></td>
<td>两个值之间算符</td>
<td>判断一个值是否在两个值之间</td>
<td><code>SELECT * FROM TABLE WHERE C BETWEEN A AND B</code></td>
</tr>
<tr>
<td><code>IN</code></td>
<td>属于运算符</td>
<td>判断一个值是否在列表中</td>
<td><code>SELECT * FROM TABLE WHERE C IN(A, B)</code></td>
</tr>
<tr>
<td><code>NOT IN</code></td>
<td>不属于运算符</td>
<td>判断一个值是否不在列表中</td>
<td><code>SELECT * FROM TABLE WHERE C NOT IN(A, B)</code></td>
</tr>
<tr>
<td><code>LIKE</code></td>
<td>模糊匹配运算符</td>
<td>判断一个值是否符合模糊匹配规则</td>
<td><code>SELECT * FROM TABLE WHERE C LIKE &#39;__&#39;</code></td>
</tr>
<tr>
<td><code>REGEXP</code></td>
<td>正则表达式运算符</td>
<td>判断一个值是否符合正则表达式的规则</td>
<td><code>SELECT * FROM TABLE WHERE C REGEXP B</code></td>
</tr>
<tr>
<td><code>RLIKE</code></td>
<td>正则表达式运算符</td>
<td>判断一个值是否符合正则表达式的规则</td>
<td><code>SELECT * FROM TABLE WHERE C RLIKE B</code></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>空运算符</strong></p>
<p>空运算符（<code>IS NULL</code>）判断一个值是否为NULL，如果为NULL则返回1，否则返回0。 </p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/86e1e52f8bf134eb1d43d9ad543d63da-a9447ba.png" alt="image-20220705110122730"></p>
</li>
<li><p><strong>非空运算符</strong></p>
<p>非空运算符（<code>IS NOT NULL</code>）判断一个值是否不为NULL，如果不为NULL则返回1，否则返回0。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/93ee0ae3b31e51102d07946e84a2e331-1416223.png" alt="image-20220705110236772"></p>
</li>
<li><p><strong>最小值运算符</strong></p>
<p>语法格式为：<code>LEAST(值1，值2，...，值n)</code>。其中，“值n”表示参数列表中有n个值。在有两个或多个参数的情况下，返回最小值。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/13b411c50c56a379bf0707e736192bc8-35800d2.png" alt="image-20220705110338880"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 当参数是整数或者浮点数时，LEAST将返回其中最小的值</span><br><span class="line">- 当参数为字符串时，返回字母表中顺序最靠前的字符</span><br><span class="line">- 当比较值列表中有NULL时，不能判断大小，返回值为NULL</span><br></pre></td></tr></table></figure></li>
<li><p><strong>最大值运算符</strong></p>
<p>语法格式为：<code>GREATEST(值1，值2，...，值n)</code>。其中，n表示参数列表中有n个值。当有两个或多个参数时，返回值为最大值。假如任意一个自变量为NULL，则GREATEST()的返回值为NULL。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a5863d6d94f192f15b51434cd5242820-211b3b8.png" alt="image-20220705110506031"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 当参数中是整数或者浮点数时，GREATEST将返回其中最大的值</span><br><span class="line">- 当参数为字符串时，返回字母表中顺序最靠后的字符</span><br><span class="line">- 当比较值列表中有NULL时，不能判断大小，返回值为NULL</span><br></pre></td></tr></table></figure></li>
<li><p><strong>BETWEEN AND运算符</strong></p>
<p><code>BETWEEN AND</code>运算符使用的格式通常为<code>SELECT D FROM TABLE WHERE C BETWEEN A AND B</code>，此时，当C大于或等于A，并且C小于或等于B时，结果为1，否则结果为0。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/689b17db860235d7c8247d54f0a16a67-2424ada.png" alt="image-20220705110623796"></p>
</li>
<li><p><strong>IN运算符</strong></p>
<p><code>IN</code>运算符用于判断给定的值是否是IN列表中的一个值，如果是则返回1，否则返回0。如果给定的值为NULL，则结果为NULL。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/1cf296866e06b4f21b040cb70e7a5614-6e14801.png" alt="image-20220705110751507"></p>
</li>
<li><p> <strong>NOT IN运算符</strong></p>
</li>
</ul>
<p>  <code>NOT IN</code>运算符用于判断给定的值是否不是IN列表中的一个值，如果不是IN列表中的一个值，则返回1，否则返回0。</p>
<p>  <img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/511808d6855885c516350be6c0890cf4-4603021.png" alt="image-20220705110841206"></p>
<ul>
<li><p><strong>LIKE运算符</strong></p>
<p><code> LIKE</code>运算符主要用来匹配字符串，通常用于模糊匹配，如果满足条件则返回1，否则返回0。如果给定的值或者匹配条件为NULL，则返回结果为NULL。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LIKE运算符通常使用如下通配符：</span><br><span class="line">	%：匹配0个或多个字符。</span><br><span class="line">	_：只能匹配一个字符。</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/65e3aae55c3d6cfb54fe3f4e21b277ac-90a6a56.png" alt="image-20220705110958835"></p>
</li>
<li><p><strong>REGEXP运算符</strong></p>
<p><code>REGEXP</code>运算符用来匹配字符串，语法格式为： <code>expr REGEXP 匹配条件</code> 。如果expr满足匹配条件，返回1；如果不满足，则返回0。若expr或匹配条件任意一个为NULL，则结果为NULL。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">REGEXP运算符在进行匹配时，常用的有下面几种通配符：</span><br><span class="line">（1）^	匹配以该字符后面的字符开头的字符串。</span><br><span class="line">（2）$	匹配以该字符前面的字符结尾的字符串。</span><br><span class="line">（3）.	匹配任何一个单字符。</span><br><span class="line">（4）[...]匹配在方括号内的任何字符。例如，“[abc]”匹配“a”或“b”或“c”。为了命名字符的范围，使用一个‘-’。“[a-z]”匹配任何字母，而“[0-9]”匹配任何数字。</span><br><span class="line">（5）*	匹配零个或多个在它前面的字符。例如，“x*”匹配任何数量的‘x’字符，“[0-9]*”匹配任何数量的数字,而“*”匹配任何数量的任何字符。</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8b6252cb8a4db3ed9261a6b043647f03-8411a57.png" alt="image-20220705111506394"></p>
</li>
</ul>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>MySQL中支持4种逻辑运算符如下：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>AND</code> 或 <code>&amp;&amp;</code></td>
<td>逻辑与</td>
<td><code>SELECT A &amp;&amp; B</code></td>
</tr>
<tr>
<td><code>OR</code> 或 `</td>
<td></td>
<td>`</td>
</tr>
<tr>
<td><code>NOT</code> 或 <code>!</code></td>
<td>逻辑非</td>
<td><code>SELECT NOT B</code></td>
</tr>
<tr>
<td><code>XOR</code></td>
<td>逻辑异或</td>
<td><code>SELECT A XOR B</code></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>逻辑与运算符</strong></p>
<p>逻辑与（<code>AND</code>或<code>&amp;&amp;</code>）运算符是当给定的所有值均为非0值，并且都不为NULL时，返回1；当给定的一个值或者多个值为0时则返回0；否则返回NULL。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/083e9780c3370007e04a93ff60f11b93-e5e93d4.png" alt="image-20220705162417398"></p>
</li>
<li><p><strong>逻辑或运算符</strong></p>
<p>逻辑或（<code>OR</code>或<code>||</code>）运算符是当给定的值都不为NULL，并且任何一个值为非0值时，则返回1，否则返回0；当一个值为NULL，并且另一个值为非0值时，返回1，否则返回NULL；当两个值都为NULL时，返回NULL。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f9e403b47cd9a7d0e2ddb7ae100ab46e-14ef01b.png" alt="image-20220705162525765"></p>
<blockquote>
<p>OR可以和AND一起使用，但是在使用时要注意两者的优先级，由于AND的优先级高于OR，因此先对AND两边的操作数进行操作，再与OR中的操作数结合</p>
</blockquote>
</li>
<li><p><strong>逻辑非运算符</strong></p>
<p>逻辑非（<code>NOT</code>或<code>!</code>）运算符表示当给定的值为0时返回1；当给定的值为非0值时返回0；当给定的值为NULL时，返回NULL。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/72ffd747c57da1fdc0a62ff9455fab22-17653cc.png" alt="image-20220705162636209"></p>
</li>
<li><p><strong>逻辑异或运算符</strong> </p>
<p>逻辑异或（<code>XOR</code>）运算符是当给定的值中任意一个值为NULL时，则返回NULL；如果两个非NULL的值都是0或者都不等于0时，则返回0；如果一个值为0，另一个值不为0时，则返回1。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a0f91db337374e536331a127518db191-7d97ea9.png" alt="image-20220705163817068"></p>
</li>
</ul>
<h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><p>位运算符是在二进制数上进行计算的运算符。位运算符会先将操作数变成二进制数，然后进行位运算，最后将计算结果从二进制变回十进制数。</p>
<p>MySQL支持的位运算符如下:</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>&amp;</code></td>
<td>按位与(位AND)</td>
<td><code>SELECT A &amp; B</code></td>
</tr>
<tr>
<td>`</td>
<td>`</td>
<td>按位或(位OR)</td>
</tr>
<tr>
<td><code>^</code></td>
<td>按位异或(位XOR)</td>
<td><code>SELECT A ^ B</code></td>
</tr>
<tr>
<td><code>~</code></td>
<td>按位取反</td>
<td><code>SELECT ~ A</code></td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>按位右移</td>
<td><code>SELECT A &gt;&gt; 2</code></td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>按位左移</td>
<td><code>SELECT A &lt;&lt; 2</code></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>按位与运算符</strong></p>
<p>按位与（<code>&amp;</code>）运算符将给定值对应的二进制数<strong>逐位</strong>进行<strong>逻辑与</strong>运算。当给定值对应的二进制位的数值都为1时，则该位返回1，否则返回0。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/989392f1dc8b9a89703cf8dcdbcc5791-5fa0bfa.png" alt="image-20220705163245044"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 1的二进制数为0001，10的二进制数为1010，所以1 &amp; 10的结果为0000，对应的十进制数为0。</span><br><span class="line">- 20的二进制数为10100，30的二进制数为11110，所以20 &amp; 30的结果为10100，对应的十进制数为20。</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5c8518a1f41cb925803acb40e7bf85af-c6e8910.png" alt="image-20220705163924499"></p>
</li>
<li><p><strong>按位或运算符</strong></p>
<p>按位或（<code>|</code>）运算符将给定的值对应的二进制数<strong>逐位</strong>进行<strong>逻辑或</strong>运算。当给定值对应的二进制位的数值有一个或两个为1时，则该位返回1，否则返回0。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2a1b89a33731acb4abfee6eead655474-ef949f3.png" alt="image-20220705163519020"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 1的二进制数为0001，10的二进制数为1010，所以1 | 10的结果为1011，对应的十进制数为11。</span><br><span class="line">- 20的二进制数为10100，30的二进制数为11110，所以20 | 30的结果为11110，对应的十进制数为30。</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/d9526563a808aa2bb6064efc1ad107f8-8db7393.png" alt="image-20220705163951001"></p>
</li>
<li><p><strong>按位异或运算符</strong></p>
<p>按位异或（<code>^</code>）运算符将给定的值对应的二进制数<strong>逐位</strong>进行<strong>逻辑异或</strong>运算。当给定值对应的二进制位的数值不同时，则该位返回1，否则返回0。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a213ee77ca2dc1386b1b6eca88d72be3-8437a5c.png" alt="image-20220705163731301"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 1的二进制数为0001，10的二进制数为1010，所以1 ^ 10的结果为1011，对应的十进制数为11。</span><br><span class="line">- 20的二进制数为10100，30的二进制数为11110，所以20 ^ 30的结果为01010，对应的十进制数为10。</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/db798bc395ccf50ea941f02f6e840870-2409781.png" alt="image-20220705164003169"></p>
</li>
<li><p><strong>按位取反运算符</strong> </p>
<p>按位取反（<code>~</code>）运算符将给定的值的二进制数<strong>逐位</strong>进行<strong>取反</strong>操作，即将1变为0，将0变为1。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/bbbae16149e3ecff74a34c22dd0d21c1-03e7f79.png" alt="image-20220705165925877"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由于按位取反（~）运算符的优先级高于按位与（&amp;）运算符的优先级，所以10 &amp; ~1中首先对数字1进行按位取反操作，结果除了最低位为0，其他位都为1，然后与10进行按位与操作，结果为10。</span><br></pre></td></tr></table></figure></li>
<li><p><strong>按位右移运算符</strong></p>
<p>按位右移（<code>&gt;&gt;</code>）运算符将给定的值的二进制数的所有位<strong>右移指定的位数</strong>。右移指定的位数后，右边低位的数值被移出并丢弃，左边高位空出的位置用0补齐。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/3977f4622d2e174c49baadbf248b000f-9900f92.png" alt="image-20220705170032268"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 1的二进制数为0000 0001，右移2位为0000 0000，对应的十进制数为0。</span><br><span class="line">- 4的二进制数为0000 0100，右移2位为0000 0001，对应的十进制数为1。</span><br></pre></td></tr></table></figure></li>
<li><p><strong>按位左移运算符</strong></p>
<p>按位左移（<code>&lt;&lt;</code>）运算符将给定的值的二进制数的所有位<strong>左移指定的位数</strong>。左移指定的位数后，左边高位的数值被移出并丢弃，右边低位空出的位置用0补齐。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8b0d05e9bb44638f0ee080628e6af7e4-9312172.png" alt="image-20220705170246024"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 1的二进制数为0000 0001，左移两位为0000 0100，对应的十进制数为4。</span><br><span class="line">- 4的二进制数为0000 0100，左移两位为0001 0000，对应的十进制数为16。</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="空值参与运算"><a href="#空值参与运算" class="headerlink" title="空值参与运算"></a>空值参与运算</h3><p>所有运算符或列值遇到 <code>null</code> 值，运算的结果都为<code>null</code> </p>
<blockquote>
<p>在 MySQL 里面， 空值不等于空字符串。一个空字符串的长度是 0，而一个空值的长度是空。</p>
<p>而且，在 MySQL 里面，空值是占用空间的</p>
</blockquote>
<h3 id="运算符的优先级"><a href="#运算符的优先级" class="headerlink" title="运算符的优先级"></a>运算符的优先级</h3><table>
<thead>
<tr>
<th align="center">优先级</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td><code>:=</code>, <code>=</code></td>
</tr>
<tr>
<td align="center">2</td>
<td>`</td>
</tr>
<tr>
<td align="center">3</td>
<td><code>&amp;&amp;</code> , <code>AND</code></td>
</tr>
<tr>
<td align="center">4</td>
<td><code>NOT</code></td>
</tr>
<tr>
<td align="center">5</td>
<td><code>BETWEEN AND</code>, <code>CASE</code>, <code>WHEN</code>, <code>THEN</code>, <code>ELSE</code></td>
</tr>
<tr>
<td align="center">6</td>
<td><code>=</code>(比较) , <code>&lt;=&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;&gt;</code>, <code>!=</code>, <code>IS</code>, <code>LIKE</code>, <code>REGEXP</code>, <code>IN</code></td>
</tr>
<tr>
<td align="center">7</td>
<td>`</td>
</tr>
<tr>
<td align="center">8</td>
<td><code>&amp;</code></td>
</tr>
<tr>
<td align="center">9</td>
<td><code>&lt;&lt;</code>,  <code>&gt;&gt;</code></td>
</tr>
<tr>
<td align="center">10</td>
<td><code>-</code>, <code>+</code></td>
</tr>
<tr>
<td align="center">11</td>
<td><code>*</code>, <code>/</code> , <code>%</code></td>
</tr>
<tr>
<td align="center">12</td>
<td><code>^</code>(按位异或)</td>
</tr>
<tr>
<td align="center">13</td>
<td><code>-</code>(负号),  <code>~</code>(按位取反)</td>
</tr>
<tr>
<td align="center">14</td>
<td><code>!</code></td>
</tr>
<tr>
<td align="center">15</td>
<td><code>()</code></td>
</tr>
</tbody></table>
<blockquote>
<p>数字编号越大，优先级越高，优先级高的运算符先进行计算。</p>
<p>可以看到，赋值运算符的优先级最低，使用<code>()</code>括起来的表达式的优先级最高。</p>
</blockquote>
<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><p><strong>Data Definition Language</strong>，数据定义语言，用来定义数据库对象(数据库，表，字段) 。</p>
<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><ul>
<li><p>查询所有数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases; </span><br></pre></td></tr></table></figure></li>
<li><p>查询当前数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database(); </span><br></pre></td></tr></table></figure></li>
<li><p>创建数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database [if not exists] 数据库名 [default charset 字符集 ] [collate 排序规则];</span><br></pre></td></tr></table></figure></li>
<li><p>删除数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database [ if exists ] 数据库名;</span><br></pre></td></tr></table></figure></li>
<li><p>切换数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名; </span><br></pre></td></tr></table></figure></li>
</ul>
<p>使用示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 创建一个itheima数据库，并且指定字符集</span><br><span class="line">create database if not extists ni9nes_DB default charset utf8mb4;</span><br><span class="line"></span><br><span class="line">-- 删除数据库</span><br><span class="line">drop database if exists ni9nes_DB;</span><br></pre></td></tr></table></figure>

<h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="表操作-查询创建"><a href="#表操作-查询创建" class="headerlink" title="表操作-查询创建"></a>表操作-查询创建</h4><ul>
<li><p>查询当前数据库所有表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables; </span><br></pre></td></tr></table></figure></li>
<li><p> 查看指定表结构</p>
</li>
</ul>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc 表名;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过这条指令，我们可以查看到指定表的字段，字段的类型、是否可以为NULL，是否存在默认值等信<br>息。</p>
</blockquote>
<ul>
<li><p>查询指定表的建表语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table 表名; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>这条指令，主要是用来查看建表语句的，而有部分参数我们在创建表的时候，并未指定也会查询<br>到，因为这部分是数据库的默认值，如：存储引擎、字符集等。</p>
</blockquote>
</li>
<li><p>创建表结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段1 字段1类型 [ COMMENT 字段1注释 ],</span><br><span class="line">字段2 字段2类型 [COMMENT 字段2注释 ],</span><br><span class="line">字段3 字段3类型 [COMMENT 字段3注释 ],</span><br><span class="line">......</span><br><span class="line">字段n 字段n类型 [COMMENT 字段n注释 ]</span><br><span class="line">) [ COMMENT 表注释 ] ;</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/9dfac63ec776e6735184c4e9254c7a3f-b8f2689.png" alt="image-20220707161926712"></p>
</li>
</ul>
<h4 id="表操作-数据类型"><a href="#表操作-数据类型" class="headerlink" title="表操作-数据类型"></a>表操作-数据类型</h4><p>MySQL中的数据类型有很多，主要分为三类：<strong>数值类型</strong>、<strong>字符串类型</strong>、<strong>日期时间类型</strong>。</p>
<h5 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h5><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>有符号(SIGNED)范围</th>
<th>无符号(UNSIGNED)范围</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>TINYINT</code></td>
<td>1byte</td>
<td>(-128，127)</td>
<td>(0，255)</td>
<td>小整数值</td>
</tr>
<tr>
<td><code>SMALLINT</code></td>
<td>2bytes</td>
<td>(-32768，32767)</td>
<td>(0，65535)</td>
<td>大整数值</td>
</tr>
<tr>
<td><code>MEDIUMINT</code></td>
<td>3bytes</td>
<td>(-8388608，8388607)</td>
<td>(0，16777215)</td>
<td>大整数值</td>
</tr>
<tr>
<td><code>INT</code>/I<code>NTEGER  </code></td>
<td>4bytes</td>
<td>(-2147483648，  2147483647)</td>
<td>(0，4294967295)</td>
<td>大整数值</td>
</tr>
<tr>
<td><code>BIGIN</code>T</td>
<td>8bytes</td>
<td>(-2^63，2^63-1)</td>
<td>(0，2^64-1)</td>
<td>极大整数值</td>
</tr>
<tr>
<td><code>FLOAT</code></td>
<td>4bytes</td>
<td>(-3.402823466 E+38，  3.402823466351  E+38)</td>
<td>0 和  (1.175494351 E-  38，3.402823466  E+38)</td>
<td>单精度浮点数值</td>
</tr>
<tr>
<td><code>DOUBLE</code></td>
<td>8bytes</td>
<td>(-1.7976931348623157  E+308，  1.7976931348623157  E+308)</td>
<td>0 和  (2.2250738585072014  E-308，  1.7976931348623157  E+308)</td>
<td>双精度浮点数值</td>
</tr>
<tr>
<td><code>DECIMAL</code></td>
<td></td>
<td>依赖于M(精度)和D(标度) 的值</td>
<td>依赖于M(精度)和D(标度)的值</td>
<td>小数  值(精  确定点数)</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如:</span><br><span class="line">1). 年龄字段 -- 不会出现负数, 而且人的年龄不会太大</span><br><span class="line">age tinyint unsigned</span><br><span class="line">2). 分数 -- 总分100分, 最多出现一位小数</span><br><span class="line">score double(4,1)</span><br></pre></td></tr></table></figure>

<h5 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h5><table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>大小</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>CHAR</code></td>
<td>0-255  bytes</td>
<td>定长字符串(需要指定长度)</td>
</tr>
<tr>
<td><code>VARCHAR </code></td>
<td>0-65535  bytes</td>
<td>变长字符串(需要指定长度)</td>
</tr>
<tr>
<td><code>TINYBLOB</code></td>
<td>0-255  bytes</td>
<td>不超过255个字符的二进制数据</td>
</tr>
<tr>
<td><code>TINYTEXT</code></td>
<td>0-255  bytes</td>
<td>短文本字符串</td>
</tr>
<tr>
<td><code>BLOB </code></td>
<td>0-65  535 bytes</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td><code>TEXT</code></td>
<td>0-65  535 bytes</td>
<td>长文本数据</td>
</tr>
<tr>
<td><code>MEDIUMBLOB</code></td>
<td>0-16  777 215 bytes</td>
<td>二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td><code>MEDIUMTEXT</code></td>
<td>0-16  777 215 bytes</td>
<td>中等长度文本数据</td>
</tr>
<tr>
<td><code>LONGBLOB</code></td>
<td>0-4  294 967 295 bytes</td>
<td>二进制形式的极大文本数据</td>
</tr>
<tr>
<td><code>LONGTEXT</code></td>
<td>0-4  294 967 295 bytes</td>
<td>极大文本数据</td>
</tr>
</tbody></table>
<p>char 与 varchar 都可以描述字符串<br>char是定长字符串，指定长度多长，就占用多少个字符，和字段值的长度无关.<br>而varchar是变长字符串，指定的长度为最大占用长度.<br>相对来说，char的性能会更高些。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如：</span><br><span class="line">1). 用户名 username ------&gt; 长度不定, 最长不会超过50</span><br><span class="line">username varchar(50)</span><br><span class="line">2). 性别 gender ---------&gt; 存储值, 不是男,就是女</span><br><span class="line">gender char(1)</span><br><span class="line">3). 手机号 phone --------&gt; 固定长度为11</span><br><span class="line">phone char(11)</span><br></pre></td></tr></table></figure>

<h5 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h5><table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>大小</strong></th>
<th><strong>范围</strong></th>
<th><strong>格式</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>DATE</code></td>
<td>3</td>
<td>1000-01-01  至  9999-12-31</td>
<td>YYYY-MM-DD</td>
<td>日期值</td>
</tr>
<tr>
<td><code>TIME</code></td>
<td>3</td>
<td>-838:59:59  至 838:59:59</td>
<td>HH:MM:SS</td>
<td>时间值或持续时间</td>
</tr>
<tr>
<td><code>YEAR</code></td>
<td>1</td>
<td>1901  至 2155</td>
<td>YYYY</td>
<td>年份值</td>
</tr>
<tr>
<td><code>DATETIME</code></td>
<td>8</td>
<td>1000-01-01  00:00:00 至  9999-12-31  23:59:59</td>
<td>YYYY-MM-DD  HH:MM:SS</td>
<td>混合日期和时间值</td>
</tr>
<tr>
<td><code>TIMESTAMP  </code></td>
<td>4</td>
<td>1970-01-01  00:00:01 至  2038-01-19  03:14:07</td>
<td>YYYY-MM-DD  HH:MM:SS</td>
<td>混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如:</span><br><span class="line">1). 生日字段 birthday</span><br><span class="line">birthday date</span><br><span class="line">2). 创建时间 createtime</span><br><span class="line">createtime datetime</span><br></pre></td></tr></table></figure>

<h4 id="表操作-案例"><a href="#表操作-案例" class="headerlink" title="表操作-案例"></a>表操作-案例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">设计一张员工信息表，要求如下：</span><br><span class="line">1. 编号（纯数字）</span><br><span class="line">2. 员工工号 (字符串类型，长度不超过10位)</span><br><span class="line">3. 员工姓名（字符串类型，长度不超过10位）</span><br><span class="line">4. 性别（男/女，存储一个汉字）</span><br><span class="line">5. 年龄（正常人年龄，不可能存储负数）</span><br><span class="line">6. 身份证号（二代身份证号均为18位，身份证中有X这样的字符）</span><br><span class="line">7. 入职时间（取值年月日即可）</span><br></pre></td></tr></table></figure>

<p>对应的建表语句如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">    id 			int 		comment &#x27;编号&#x27;,</span><br><span class="line">    workno 		varchar(10) comment &#x27;工号&#x27;,</span><br><span class="line">    name 		varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">    gender 		char(1) 	comment &#x27;性别&#x27;,</span><br><span class="line">    age 		tinyint unsigned 	comment &#x27;年龄&#x27;,</span><br><span class="line">    idcard 		char(18) 	comment &#x27;身份证号&#x27;,</span><br><span class="line">    entrydate 	date 		comment &#x27;入职时间&#x27;</span><br><span class="line">) comment &#x27;员工表&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/3af6ea4802347da0d64b046919c25d18-882e3bc.png" alt="image-20220707163016487"></p>
<h4 id="表操作-修改"><a href="#表操作-修改" class="headerlink" title="表操作-修改"></a>表操作-修改</h4><ul>
<li><p>添加字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD 字段名 类型 (长度) [ COMMENT 注释 ] [ 约束 ]; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如 , 为emp表增加一个新的字段”昵称”为nickname，类型为varchar(20)</span><br><span class="line">ALTER TABLE emp ADD nickname varchar(20) COMMENT &#x27;昵称&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p>修改数据类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 MODIFY 字段名 新数据类型 (长度); </span><br></pre></td></tr></table></figure></li>
<li><p>修改字段名和字段类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型 (长度) [ COMMENT 注释 ] [ 约束 ];</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 将emp表的nickname字段修改为username，类型为varchar(30)</span><br><span class="line">ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT &#x27;昵称&#x27;; </span><br></pre></td></tr></table></figure></li>
<li><p>删除字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DROP 字段名; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 将emp表的字段username删除</span><br><span class="line">ALTER TABLE emp DROP username; </span><br></pre></td></tr></table></figure></li>
<li><p>修改表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 RENAME TO 新表名; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 将emp表的表名修改为 employee</span><br><span class="line">ALTER TABLE emp RENAME TO employee; </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="表操作-删除"><a href="#表操作-删除" class="headerlink" title="表操作-删除"></a>表操作-删除</h4><ul>
<li><p>删除表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE [ IF EXISTS ] 表名; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>可选项 IF EXISTS 代表，只有表名存在时才会删除该表，表名不存在，则不执行删除操作(如果不加该参数项，删除一张不存在的表，执行将会报错)。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 如果tb_user表存在，则删除tb_user表</span><br><span class="line">DROP TABLE IF EXISTS tb_user; </span><br></pre></td></tr></table></figure></li>
<li><p>清空表数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE TABLE 表名; </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><p><strong>Data Manipulation Language</strong>(数据操作语言)，用来对数据库中表的数据记录进行增、删、改操作。</p>
<ul>
<li>添加数据（INSERT）</li>
<li>修改数据（UPDATE）</li>
<li>删除数据（DELETE）</li>
</ul>
<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><ul>
<li><p>给指定字段添加数据</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...); </span><br></pre></td></tr></table></figure>

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 给employee表所有的字段添加数据</span><br><span class="line">insert into emp(id,workno,name,gender,age,idcard,entrydate)</span><br><span class="line">values(1,&#x27;1&#x27;,&#x27;ni9ne&#x27;,&#x27;男&#x27;,10,&#x27;123456789012345678&#x27;,&#x27;2000-01-01&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><p>给全部字段添加数据</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 VALUES (值1, 值2, ...); </span><br></pre></td></tr></table></figure>

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 给employee表所有的字段添加数据</span><br><span class="line">insert into employee values(2,&#x27;2&#x27;,&#x27;usern&#x27;,&#x27;男&#x27;,18,&#x27;123456789012345670&#x27;,&#x27;2005-01-01&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><p>批量添加数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...);</span><br><span class="line"></span><br><span class="line">INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...) ; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 批量插入数据到employee表</span><br><span class="line">insert into emp values</span><br><span class="line">    (3,&#x27;3&#x27;,&#x27;user1&#x27;,&#x27;男&#x27;,38,&#x27;123456789012345670&#x27;,&#x27;2005-01-01&#x27;),</span><br><span class="line">    (4,&#x27;4&#x27;,&#x27;user2&#x27;,&#x27;女&#x27;,18,&#x27;123456789012345670&#x27;,&#x27;2005-01-01&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>注意事项:</strong><br>•  插入数据时，指定的字段顺序需要与值的顺序是一一对应的。<br>•  字符串和日期型数据应该包含在引号中。<br>•  插入的数据大小，应该在字段的规定范围内。</p>
</li>
</ul>
<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><p>修改数据的具体语法为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表名 SET 字段名1 = 值1 , 字段名2 = 值2 , .... [ WHERE 条件 ] ; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 修改id为1的数据，将name修改为 user_new</span><br><span class="line">update emp set name = &#x27;user_new&#x27; where id = 1; </span><br></pre></td></tr></table></figure>

<p><strong>注意事项:</strong> </p>
<p>修改语句的条件可以有，也可以没有，如果没有条件，则会修改整张表的所有数据。</p>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p>删除数据的具体语法为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM 表名 [ WHERE 条件 ] ; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 删除gender为女的员工</span><br><span class="line">delete from emp where gender = &#x27;女&#x27;; </span><br></pre></td></tr></table></figure>

<p><strong>注意事项:</strong></p>
<p>•  DELETE 语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据。<br>•  DELETE 语句不能删除某一个字段的值 (可以使用UPDATE，将该字段值置为NULL即可)。</p>
<h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><p><strong>Data Query Language</strong>(数据查询语言)，数据查询语言，用来查询数据库中表的记录。</p>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><p>DQL 查询语句，语法结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT 	字段列表</span><br><span class="line">FROM 	表名列表</span><br><span class="line">WHERE 	条件列表</span><br><span class="line">GROUP BY 分组字段列表</span><br><span class="line">HAVING 	分组后条件列表</span><br><span class="line">ORDER BY 排序字段列表</span><br><span class="line">LIMIT 	分页参数</span><br></pre></td></tr></table></figure>

<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><p>在基本查询的DQL语句中，不带任何的查询条件，查询的语法如下：</p>
<h4 id="查询多个字段"><a href="#查询多个字段" class="headerlink" title="查询多个字段"></a>查询多个字段</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 语法:</span><br><span class="line">SELECT 字段1, 字段2, 字段3 ... FROM 表名 ; </span><br><span class="line">SELECT * FROM 表名 ; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意 : * 号代表查询所有字段，在实际开发中尽量少用（不直观、影响效率）。</p>
</blockquote>
<h4 id="字段设置别名"><a href="#字段设置别名" class="headerlink" title="字段设置别名"></a>字段设置别名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 语法:</span><br><span class="line">SELECT 字段1 [ AS 别名1 ] , 字段2 [ AS 别名2 ] ... FROM 表名; </span><br><span class="line">SELECT 字段1 [ 别名1 ] , 字段2 [ 别名2 ] ... FROM 表名; </span><br></pre></td></tr></table></figure>

<p>在列名之后加入关键字<code>AS</code>, 代表给该字段起别名。</p>
<p>别名可以使用双引号，以便在别名中包含空格或特殊的字符并区分大小写。</p>
<p>关键字 <code>AS</code> 可以省略</p>
<h4 id="去除重复记录"><a href="#去除重复记录" class="headerlink" title="去除重复记录"></a>去除重复记录</h4><p>默认情况下，查询会返回全部行，包括重复行。在SELECT语句中使用关键字 <code>DISTINCT</code> 去除重复行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT 字段列表 FROM 表名; </span><br></pre></td></tr></table></figure>

<p>有两点需要注意：</p>
<ul>
<li><p>DISTINCT 需要放到所有列名的前面，如果写成 以下方式会<strong>报错</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary, DISTINCT department_id FROM employees </span><br></pre></td></tr></table></figure></li>
<li><p>DISTINCT 其实是对后面所有列名的组合进行去重</p>
</li>
</ul>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 语法:</span><br><span class="line">SELECT 字段列表 FROM 表名 WHERE 条件列表 ; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 查询年龄等于 88 的员工</span><br><span class="line">select * from emp where age = 88; </span><br><span class="line">-- 查询有身份证号的员工信息</span><br><span class="line">select * from emp where idcard is not null; </span><br><span class="line">-- 查询年龄在15岁(包含) 到 20岁(包含)之间的员工信息</span><br><span class="line">select * from emp where age between 15 and 20;</span><br></pre></td></tr></table></figure>

<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>将一列数据作为一个整体，进行纵向计算 。</p>
<p>常见的聚合函数:</p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>功能</strong></th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>统计数量</td>
</tr>
<tr>
<td>max</td>
<td>大值</td>
</tr>
<tr>
<td>min</td>
<td>小值</td>
</tr>
<tr>
<td>avg</td>
<td>平均值</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 语法:</span><br><span class="line">SELECT 聚合函数(字段列表) FROM 表名 ; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意 : NULL值是不参与所有聚合函数运算的。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 统计该企业员工数量</span><br><span class="line">select count(*) from emp; -- 统计的是总记录数</span><br><span class="line">select count(idcard) from emp; -- 统计的是idcard字段不为null的记录数</span><br><span class="line">-- 统计该企业员工的平均年龄</span><br><span class="line">select avg(age) from emp; </span><br><span class="line">-- 统计西安地区员工的年龄之和</span><br><span class="line">select sum(age) from emp where workaddress = &#x27;西安&#x27;; </span><br></pre></td></tr></table></figure>

<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 语法</span><br><span class="line">SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组后过滤条件 ];</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 根据性别分组, 统计男性员工和女性员工的数量</span><br><span class="line">select gender, count(*) from emp group by gender ; </span><br><span class="line">-- 查询年龄小于45的员工 , 并根据工作地址分组 , 获取员工数量大于等于3的工作地址</span><br><span class="line">select workaddress, count(*) address_count from emp </span><br><span class="line">where age &lt; 45 </span><br><span class="line">group by workaddress </span><br><span class="line">having address_count &gt;= 3;</span><br><span class="line">-- 统计各个工作地址上班的男性及女性员工的数量</span><br><span class="line">select workaddress, gender, count(*) &#x27;数量&#x27; from emp group by gender, workaddress;</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong>:</p>
<p>•  分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。<br>•  执行顺序: <code>where</code> &gt; 聚合函数 &gt; <code>having</code> 。<br>•  支持多字段分组, 具体语法为 : <code>group by columnA,columnB</code></p>
<p> <strong><code>where</code>与<code>having</code>区别</strong></p>
<ul>
<li>执行时机不同：<code>where</code>是<strong>分组之前</strong>进行过滤，不满足<code>where</code>条件，不参与分组；而<code>having</code>是<strong>分组之后</strong>对结果进行过滤。</li>
<li>判断条件不同：<code>where</code>不能对聚合函数进行判断，而<code>having</code>可以</li>
</ul>
<p><strong><code>WITH ROLLUP</code> 使用</strong></p>
<p>使用 <code>WITH ROLLUP</code> 关键字之后，在所有查询出的分组记录之后增加一条记录，该记录计算查询出的所<br>有记录的总和，即统计记录数量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 根据性别分组 , 统计男性员工、女性员工的平均年龄, 及全部员工的平均年龄</span><br><span class="line">select gender, avg(age) from emp group by gender with rollup; </span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/38b6127cddb1dd0925396e7ea31db5bc-ed94968.png" alt="image-20220707171949006"></p>
<blockquote>
<p>当使用ROLLUP时，不能同时使用ORDER BY子句进行结果排序，即ROLLUP和ORDER BY是互相排斥的</p>
</blockquote>
<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 语法:</span><br><span class="line">SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1 , 字段2 排序方式2 ; </span><br></pre></td></tr></table></figure>

<p>排序方式</p>
<ul>
<li><code>ASC</code> : 升序(默认值)</li>
<li><code>DESC</code>: 降序</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 根据年龄对公司的员工进行升序排序</span><br><span class="line">select * from emp order by age asc;</span><br><span class="line">-- 根据年龄对公司的员工进行升序排序 , 年龄相同 , 再按照入职时间进行降序排序</span><br><span class="line">select * from emp order by age asc , entrydate desc; </span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong></p>
<p>可以使用不在SELECT列表中的列排序。</p>
<p>在对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第一列数据中所有值都是唯一的，将不再对第二列进行排序。</p>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>MySQL中使用 <code>LIMIT</code> 实现分页, 格式:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数 ; </span><br></pre></td></tr></table></figure>

<p><strong>注意事项:</strong> </p>
<p>•  起始索引从0开始，<code>起始索引 = （查询页码 - 1）* 每页显示记录数</code>。<br>•  分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是<code>LIMIT</code>。<br>•  如果查询的是第一页数据，起始索引可以省略，直接简写为 <code>limit 10</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 如, 查询第1页员工数据, 每页展示10条记录</span><br><span class="line">select * from emp limit 0,10;</span><br><span class="line">-- 查询第2页员工数据, 每页展示10条记录    (页码-1)*页展示记录数</span><br><span class="line">select * from emp limit 10,10; </span><br></pre></td></tr></table></figure>

<h3 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h3><p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/d853fafde5669486800d47f66b494e48-a876385.png" alt="image-20220707173247097"></p>
<p>比如一个 SQL 语句，那么它的关键字顺序和执行顺序是下面这样的:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT player_id, player_name, count(*) as num 	# 顺序 5</span><br><span class="line">FROM player JOIN team ON player.team_id = team.team_id 		# 顺序 1</span><br><span class="line">WHERE height &gt; 1.80 			# 顺序 2</span><br><span class="line">GROUP BY player.team_id 		# 顺序 3</span><br><span class="line">HAVING num &gt; 2 					# 顺序 4</span><br><span class="line">ORDER BY num DESC 				# 顺序 6</span><br><span class="line">LIMIT 2 						# 顺序 7</span><br></pre></td></tr></table></figure>

<p>在 SELECT 语句执行这些步骤的时候，每个步骤都会产生一个 <strong>虚拟表</strong> ，然后将这个虚拟表传入下一个步<br>骤中作为输入。需要注意的是，这些步骤隐含在 SQL 的执行过程中，对于我们来说是不可见的。</p>
<h3 id="执行原理"><a href="#执行原理" class="headerlink" title="执行原理"></a>执行原理</h3><ol>
<li><p>SELECT语句是先执行 <strong>FROM</strong> 这一步的。在这个阶段，如果是多张表联查，还会经历下面的几个步骤：</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 首先先通过 CROSS JOIN 求笛卡尔积，相当于得到虚拟表 vt（virtual table）1-1；</span><br><span class="line">2. 通过 ON 进行筛选，在虚拟表 vt1-1 的基础上进行筛选，得到虚拟表 vt1-2；</span><br><span class="line">3. 添加外部行。如果我们使用的是左连接、右链接或者全连接，就会涉及到外部行，也就是在虚拟表 vt1-2 的基础上增加外部行，得到虚拟表 vt1-3。</span><br><span class="line"></span><br><span class="line">如果操作的是两张以上的表，还会重复上面的步骤，直到所有表都被处理完为止。这个过程得到是原始数据。</span><br></pre></td></tr></table></figure></li>
<li><p>在虚拟表 vt1基础上再进行 <strong>WHERE</strong> 阶段 。在这个阶段中，会根据 vt1表的结果进行筛选过滤，得到虚拟表 vt2 。</p>
</li>
<li><p>然后进入第三步和第四步，也就是  <strong>GROUP</strong> 和 <strong>HAVING</strong> 阶段 。在这个阶段中，实际上是在虚拟表 vt2 的基础上进行分组和分组过滤，得到中间的虚拟表  vt3 和  vt4 。</p>
</li>
<li><p>进入到  <strong>SELECT</strong> 和 <strong>DISTINCT</strong>阶段 。首先在 SELECT 阶段会提取想要的字段，然后在 DISTINCT 阶段过滤掉重复的行，分别得到中间的虚拟表vt5-1 和  vt5-2 。</p>
</li>
<li><p>当提取了想要的字段数据之后，就可以按照指定的字段进行排序，也就是 <strong>ORDER BY</strong> 阶段 ，得到虚拟表 vt6。</p>
</li>
<li><p>最后在 vt6 的基础上，取出指定行的记录，也就是  <strong>LIMIT</strong> 阶段 ，得到最终的结果，对应的是虚拟表vt7 。</p>
</li>
</ol>
<blockquote>
<p>在写 SELECT 语句的时候，不一定存在所有的关键字，相应的阶段就会省略</p>
</blockquote>
<h2 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h2><p><strong>Data Control Language</strong>(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。</p>
<h3 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h3><ul>
<li><p>查询用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from mysql.user; </span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/3bb4db041c21281a42825822c642c84c-9a59222.png" alt="image-20220707174342109"></p>
<p>其中 <code>Host</code>代表当前用户访问的主机, 如果为localhost, 仅代表只能够在当前本机访问，是不可以远程访问的。 </p>
<p><code>User</code>代表的是访问该数据库的用户名。在MySQL中需要通过Host和User来唯一标识一个用户。</p>
</li>
<li><p>创建用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED BY &#x27;密码&#x27;; </span><br></pre></td></tr></table></figure></li>
<li><p>修改用户密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;新密码&#x27; ;</span><br></pre></td></tr></table></figure></li>
<li><p>删除用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER &#x27;用户名&#x27;@&#x27;主机名&#x27; ;  </span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>注意事项:</strong> </p>
<p>• 在MySQL中需要通过<code>用户名@主机名</code>的方式，来唯一标识一个用户。</p>
<p>• 主机名可以使用 <code>%</code> 通配，代表所有。</p>
<h3 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h3><p>MySQL中定义了很多种权限，但是常用的就以下几种：</p>
<table>
<thead>
<tr>
<th><strong>权限</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ALL</code>,  <code>ALL PRIVILEGES</code></td>
<td>所有权限</td>
</tr>
<tr>
<td><code>SELECT</code></td>
<td>查询数据</td>
</tr>
<tr>
<td><code>INSERT</code></td>
<td>插入数据</td>
</tr>
<tr>
<td><code>UPDATE</code></td>
<td>修改数据</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td>删除数据</td>
</tr>
<tr>
<td><code>ALTER</code></td>
<td>修改表</td>
</tr>
<tr>
<td><code>DROP</code></td>
<td>删除数据库/表/视图</td>
</tr>
<tr>
<td><code>CREATE</code></td>
<td>创建数据库/表</td>
</tr>
</tbody></table>
<p>上述只是简单罗列了常见的几种权限描述，其他权限描述及含义，可以直接参考官方文档。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html</span><br></pre></td></tr></table></figure>

<ul>
<li><p>查询权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;用户名&#x27;@&#x27;主机名&#x27; ; </span><br></pre></td></tr></table></figure></li>
<li><p>授予权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT 权限列表 ON 数据库名.表名 TO &#x27;用户名&#x27;@&#x27;主机名&#x27;; </span><br></pre></td></tr></table></figure></li>
<li><p>撤销权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REVOKE 权限列表 ON 数据库名.表名 FROM &#x27;用户名&#x27;@&#x27;主机名&#x27;; </span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>注意事项：</strong></p>
<p>•  多个权限之间，使用逗号分隔</p>
<p>•  授权时， 数据库名和表名可以使用 <code>*</code> 进行通配，代表所有。</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。</p>
<p>MySQL提供的内置函数从 <strong>实现的功能角度</strong> 可以分为<strong>数值函数</strong>、<strong>字符串函数</strong>、<strong>日期和时间函数</strong>、<strong>流程控制函数</strong>、<strong>加密与解密函数</strong>、<strong>获取MySQL信息函数</strong>、<strong>聚合函数</strong>等。</p>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><h4 id="基本函数"><a href="#基本函数" class="headerlink" title="基本函数"></a>基本函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ABS(x)  </code></td>
<td>返回x的绝对值</td>
</tr>
<tr>
<td><code>SIGN(X) </code></td>
<td>返回X的符号。正数返回1，负数返回-1，0返回0</td>
</tr>
<tr>
<td><code>PI()  </code></td>
<td>返回圆周率的值</td>
</tr>
<tr>
<td><code>CEIL(x)</code>，<code>CEILING(x) </code></td>
<td>返回大于或等于某个值的最小整数</td>
</tr>
<tr>
<td><code>FLOOR(x)  </code></td>
<td>返回小于或等于某个值的最大整数</td>
</tr>
<tr>
<td><code>LEAST(e1,e2,e3…)  </code></td>
<td>返回列表中的最小值</td>
</tr>
<tr>
<td><code> GREATEST(e1,e2,e3…) </code></td>
<td>返回列表中的最大值</td>
</tr>
<tr>
<td><code>MOD(x,y)  </code></td>
<td>返回X除以Y后的余数</td>
</tr>
<tr>
<td><code> RAND() </code></td>
<td>返回0~1的随机值</td>
</tr>
<tr>
<td><code> RAND(x) </code></td>
<td>返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随数</td>
</tr>
<tr>
<td><code>ROUND(x) </code></td>
<td>返回一个对x的值进行四舍五入后，最接近于X的整数</td>
</tr>
<tr>
<td><code>ROUND(x,y) </code></td>
<td>返回一个对x的值进行四舍五入后 接近X的值，并保留到小数点后面Y位</td>
</tr>
<tr>
<td><code>TRUNCATE(x,y)  </code></td>
<td>返回数字x截断为y位小数的结果</td>
</tr>
<tr>
<td><code>SQRT(x)  </code></td>
<td>返回x的平方根。当X的值为负数时，返回NULL</td>
</tr>
<tr>
<td><code>RADIANS(x)</code></td>
<td>将角度转化为弧度，其中，参数x为角度值</td>
</tr>
<tr>
<td><code>DEGREES(x)</code></td>
<td>将弧度转化为角度，其中，参数x为弧度值</td>
</tr>
</tbody></table>
<p><strong>使用范例</strong> </p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">ABS(-123),ABS(32),SIGN(-23),SIGN(43),PI(),CEIL(32.32),CEILING(-43.23),FLOOR(32.32),FLOOR(-43.23),MOD(12,5);</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f5bca1efda8dc5b5edaaf0f5787ae394-b94aaf7.png" alt="image-20220706195815666"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT RAND(),RAND(),RAND(10),RAND(10),RAND(-1),RAND(-1);</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5615db74db433691532999a50e0ae891-7b295c2.png" alt="image-20220706195909263"></p>
<blockquote>
<p>随机数rand()函数, 获取0~1之间的随机数值. </p>
<p>支持传入参数, 代表随机数因子, 当传入相同因子时, 同一次获取到的随机数是相同的</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ROUND(12.33),ROUND(12.343,2),ROUND(12.324,-1),TRUNCATE(12.66,1),TRUNCATE(12.66,-1)</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/808dcab2e61529ce934d4543def80043-aafd8db.png" alt="image-20220706200555076"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT RADIANS(30),RADIANS(60),RADIANS(90),DEGREES(2*PI()),DEGREES(RADIANS(90));</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/931110c751cc58f92e897617a57b80c6-1f3fb8f.png" alt="image-20220706201057191"></p>
<h4 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>SIN(x)  </code></td>
<td>返回x的正弦值，其中，参数x为弧度值</td>
</tr>
<tr>
<td><code>ASIN(x)  </code></td>
<td>返回x的反正弦值，即获取正弦为x的值。如果x的值不在-1到1之间，则返回NULL</td>
</tr>
<tr>
<td><code>COS(x)  </code></td>
<td>返回x的余弦值，其中，参数x为弧度值</td>
</tr>
<tr>
<td><code>ACOS(x)  </code></td>
<td>返回x的反余弦值，即获取余弦为x的值。如果x的值不在-1到1之间，则返回NULL</td>
</tr>
<tr>
<td><code>TAN(x)  </code></td>
<td>返回x的正切值，其中，参数x为弧度值</td>
</tr>
<tr>
<td><code>ATAN(x)  </code></td>
<td>返回x的反正切值，即返回正切值为x的值</td>
</tr>
<tr>
<td><code>ATAN2(m,n)</code></td>
<td>返回两个参数的反正切值</td>
</tr>
<tr>
<td><code>COT(x) </code></td>
<td>返回x的余切值，其中，X为弧度值</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SIN(RADIANS(30)),DEGREES(ASIN(1)),TAN(RADIANS(45)),DEGREES(ATAN(1)),DEGREES(ATAN2(1,1));</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/4c3c6faaf104a27b490b0343dde89423-2d49fa0.png" alt="image-20220707123537722"></p>
<h4 id="指数对数函数"><a href="#指数对数函数" class="headerlink" title="指数对数函数"></a>指数对数函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>POW(x,y)</code>，<code>POWER(X,Y)</code></td>
<td>返回x的y次方</td>
</tr>
<tr>
<td><code>EXP(X)</code></td>
<td>返回e的X次方，其中e是一个常数，2.718281828459045</td>
</tr>
<tr>
<td><code>LN(X)</code>，<code>LOG(X)</code></td>
<td>返回以e为底的X的对数，当X &lt;= 0 时，返回的结果为NULL</td>
</tr>
<tr>
<td><code>LOG10(X) </code></td>
<td>返回以10为底的X的对数，当X &lt;= 0 时，返回的结果为NULL</td>
</tr>
<tr>
<td><code>LOG2(X) </code></td>
<td>返回以2为底的X的对数，当X &lt;= 0 时，返回NULL</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT POW(2,5),POWER(2,4),EXP(2),LN(10),LOG10(10),LOG2(4);</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f2de7e76b39e7fd6e3fc41c57305c31e-7ae0da0.png" alt="image-20220707123757518"></p>
<h4 id="进制转换函数"><a href="#进制转换函数" class="headerlink" title="进制转换函数"></a>进制转换函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>BIN(x)</code></td>
<td>返回x的二进制编码</td>
</tr>
<tr>
<td><code>HEX(x)</code></td>
<td>返回x的十六进制编码</td>
</tr>
<tr>
<td><code>OCT(x)</code></td>
<td>返回x的八进制编码</td>
</tr>
<tr>
<td><code>CONV(x,f1,f2)</code></td>
<td>返回f1进制数变成f2进制数</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT BIN(10),HEX(10),OCT(10),CONV(10,2,8)</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/6826fc71dcfa36f03f7a72dda820e6f6-9916815.png" alt="image-20220707123940222"></p>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASCII(S)</code></td>
<td>返回字符串S中的第一个字符的ASCII码值</td>
</tr>
<tr>
<td><code>CHAR_LENGTH(s)</code></td>
<td>返回字符串s的字符数。作用与<code>CHARACTER_LENGTH(s)</code>相同</td>
</tr>
<tr>
<td><code>LENGTH(s)</code></td>
<td>返回字符串s的字节数，和字符集有关</td>
</tr>
<tr>
<td><code>CONCAT(s1,s2,......,sn)</code></td>
<td>连接s1,s2,……,sn为一个字符串</td>
</tr>
<tr>
<td><code>CONCAT_WS(x, s1,s2,......,sn)</code></td>
<td>同CONCAT(s1,s2,…)函数，但是每个字符串之间要加上x</td>
</tr>
<tr>
<td><code>INSERT(str, idx, len,replacestr)</code></td>
<td>将字符串str从第idx位置开始，len个字符长的子串替换为字符串replacestr</td>
</tr>
<tr>
<td><code>REPLACE(str, a, b)</code></td>
<td>用字符串b替换字符串str中所有出现的字符串a</td>
</tr>
<tr>
<td><code>UPPER(s)</code> 或 <code>UCASE(s)</code></td>
<td>将字符串s的所有字母转成大写字母</td>
</tr>
<tr>
<td><code>LOWER(s) </code>或<code>LCASE(s)</code></td>
<td>将字符串s的所有字母转成小写字母</td>
</tr>
<tr>
<td><code>LEFT(str,n)</code></td>
<td>返回字符串str左边的n个字符</td>
</tr>
<tr>
<td><code>RIGHT(str,n)</code></td>
<td>返回字符串str右边的n个字符</td>
</tr>
<tr>
<td><code>LPAD(str, len, pad)</code></td>
<td>用字符串pad对str左边进行填充，直到str的长度为len个字符</td>
</tr>
<tr>
<td><code>RPAD(str ,len, pad)</code></td>
<td>用字符串pad对str右边进行填充，直到str的长度为len个字符</td>
</tr>
<tr>
<td><code>LTRIM(s)</code></td>
<td>去掉字符串s左侧的空格</td>
</tr>
<tr>
<td><code>RTRIM(s)</code></td>
<td>去掉字符串s右侧的空格</td>
</tr>
<tr>
<td><code>TRIM(s)</code></td>
<td>去掉字符串s开始与结尾的空格</td>
</tr>
<tr>
<td><code>TRIM(s1 FROM s)</code></td>
<td>去掉字符串s开始与结尾的s1</td>
</tr>
<tr>
<td><code>TRIM(LEADING s1  FROM s)</code></td>
<td>去掉字符串s开始处的s1</td>
</tr>
<tr>
<td><code>TRIM(TRAILING s1  FROM s)</code></td>
<td>去掉字符串s结尾处的s1</td>
</tr>
<tr>
<td><code>REPEAT(str, n)</code></td>
<td>返回str重复n次的结果</td>
</tr>
<tr>
<td><code>SPACE(n)</code></td>
<td>返回n个空格</td>
</tr>
<tr>
<td><code>STRCMP(s1,s2)</code></td>
<td>比较字符串s1,s2的ASCII码值的大小</td>
</tr>
<tr>
<td><code>SUBSTR(s,index,len)</code></td>
<td>返回从字符串s的index位置其len个字符，作用与<code>SUBSTRING(s,n,len)</code>、  <code>MID(s,n,len)</code>相同</td>
</tr>
<tr>
<td><code>LOCATE(substr,str)</code></td>
<td>返回字符串substr在字符串str中首次出现的位置，作用于<code>POSITION(substr  IN str)</code>、<code>INSTR(str,substr)</code>相同。未找到，返回0</td>
</tr>
<tr>
<td><code>ELT(m,s1,s2,…,sn)</code></td>
<td>返回指定位置的字符串，如果m=1，则返回s1，如果m=2，则返回s2，如果m=n，则返回sn</td>
</tr>
<tr>
<td><code>FIELD(s,s1,s2,…,sn)</code></td>
<td>返回字符串s在字符串列表中第一次出现的位置</td>
</tr>
<tr>
<td><code>FIND_IN_SET(s1,s2)</code></td>
<td>返回字符串s1在字符串s2中出现的位置。其中，字符串s2是一个以逗号分隔的字符串</td>
</tr>
<tr>
<td><code>REVERSE(s)</code></td>
<td>返回s反转后的字符串</td>
</tr>
<tr>
<td><code>NULLIF(value1,value2)</code></td>
<td>比较两个字符串，如果value1与value2相等，则返回NULL，否则返回 value1</td>
</tr>
</tbody></table>
<blockquote>
<p>注意：MySQL中，字符串的位置是从1开始的。</p>
</blockquote>
<h3 id="日期和时间函数"><a href="#日期和时间函数" class="headerlink" title="日期和时间函数"></a>日期和时间函数</h3><h4 id="获取日期、时间"><a href="#获取日期、时间" class="headerlink" title="获取日期、时间"></a>获取日期、时间</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>CURDATE()</code> ，<code>CURRENT_DATE()</code></td>
<td>返回当前日期，只包含年、月、日</td>
</tr>
<tr>
<td><code>CURTIME()</code> ， <code>CURRENT_TIME() </code></td>
<td>返回当前时间，只包含时、分、秒</td>
</tr>
<tr>
<td><code>NOW()</code> / <code>SYSDATE() </code>/ <code>CURRENT_TIMESTAMP()</code> /  <br /><code>LOCALTIME()</code> /  <code>LOCALTIMESTAMP() </code></td>
<td>返回当前系统日期和时间</td>
</tr>
<tr>
<td><code>UTC_DATE()</code></td>
<td>返回UTC（世界标准时间）日期</td>
</tr>
<tr>
<td><code>UTC_TIME()</code></td>
<td>返回UTC（世界标准时间）时间</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURDATE(),CURTIME(),NOW(),SYSDATE()+0,UTC_DATE(),UTC_DATE()+0,UTC_TIME(),UTC_TIME();</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5eed3199770bf0af80d697ce98df3e95-2976588.png" alt="image-20220707125419937"></p>
<h4 id="日期与时间戳的转换"><a href="#日期与时间戳的转换" class="headerlink" title="日期与时间戳的转换"></a>日期与时间戳的转换</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>UNIX_TIMESTAMP()</code></td>
<td>以UNIX时间戳的形式返回当前时间。</td>
</tr>
<tr>
<td><code>UNIX_TIMESTAMP(date) </code></td>
<td>将时间date以UNIX时间戳的形式返回。</td>
</tr>
<tr>
<td><code>FROM_UNIXTIME(timestamp)  </code></td>
<td>将UNIX时间戳的时间转换为普通格式的时间</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT UNIX_TIMESTAMP(), UNIX_TIMESTAMP(&#x27;2011-11-11 11:11:11&#x27;), FROM_UNIXTIME(1576380910);</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2a4a8f23fd36566e626f5dbd967addd4-6ccef1c.png" alt="image-20220707130551116"></p>
<h4 id="获取月份、星期、星期数、天数等函数"><a href="#获取月份、星期、星期数、天数等函数" class="headerlink" title="获取月份、星期、星期数、天数等函数"></a>获取月份、星期、星期数、天数等函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>YEAR(date)</code> / <code>MONTH(date)</code> / <code>DAY(date)</code></td>
<td>返回具体的日期值</td>
</tr>
<tr>
<td><code>HOUR(time)</code>/<code>MINUTE(time)</code>/ <code>SECOND(time)</code></td>
<td>返回具体的时间值</td>
</tr>
<tr>
<td><code>MONTHNAME(date)</code></td>
<td>返回月份：January，…</td>
</tr>
<tr>
<td><code>DAYNAME(date)</code></td>
<td>返回星期几：MONDAY，TUESDAY…..SUNDAY</td>
</tr>
<tr>
<td><code>WEEKDAY(date)</code></td>
<td>返回周几，注意，周1是0，周2是1，。。。周日是6</td>
</tr>
<tr>
<td><code>QUARTER(date)</code></td>
<td>返回日期对应的季度，范围为1～4</td>
</tr>
<tr>
<td><code>WEEK(date)</code> ， <code>WEEKOFYEAR(date)</code></td>
<td>返回一年中的第几周</td>
</tr>
<tr>
<td><code>DAYOFYEAR(date)</code></td>
<td>返回日期是一年中的第几天</td>
</tr>
<tr>
<td><code>DAYOFMONTH(date)</code></td>
<td>返回日期位于所在月份的第几天</td>
</tr>
<tr>
<td><code>DAYOFWEEK(date)</code></td>
<td>返回周几，注意：周日是1，周一是2，。。。周六是  7</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">YEAR(CURDATE()),MONTH(CURDATE()),DAY(CURDATE()),</span><br><span class="line">HOUR(CURTIME()),MINUTE(NOW()),SECOND(SYSDATE());</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/4b7b74ccb638f8cbfa0de08db3c01f43-2757fec.png" alt="image-20220707130851404"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT MONTHNAME(&#x27;2021-10-26&#x27;),DAYNAME(&#x27;2021-10-26&#x27;),WEEKDAY(&#x27;2021-10-26&#x27;),</span><br><span class="line">QUARTER(CURDATE()),WEEK(CURDATE()),DAYOFYEAR(NOW()),</span><br><span class="line">DAYOFMONTH(NOW()),DAYOFWEEK(NOW());</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/5431f8decdd870150d1e335435b6c1c5-2f091ea.png" alt="image-20220707131104475"></p>
<h4 id="日期的操作函数"><a href="#日期的操作函数" class="headerlink" title="日期的操作函数"></a>日期的操作函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>EXTRACT(type FROM date)</code></td>
<td>返回指定日期中特定的部分，type指定返回的值</td>
</tr>
</tbody></table>
<p>函数中<code>type</code>的取值与含义：</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/f27a751254afb237adedbc80578768c9-08aca16.png" alt="image-20220707131225431"></p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/4aa7ecb5ef74032876f671b11f8fa2df-7a2949d.png" alt="image-20220707131231606"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW(),EXTRACT(MINUTE FROM NOW()),EXTRACT( WEEK FROM NOW()),</span><br><span class="line">EXTRACT( QUARTER FROM NOW()),EXTRACT( MINUTE_SECOND FROM NOW());</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/39ef9b6c3aaff0fe81add12a5e380a10-8c357b4.png" alt="image-20220707131353893"></p>
<h4 id="时间和秒钟转换的函数"><a href="#时间和秒钟转换的函数" class="headerlink" title="时间和秒钟转换的函数"></a>时间和秒钟转换的函数</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>TIME_TO_SEC(time)</code></td>
<td>将 time 转化为秒并返回结果值。转化的公式为：小时x3600+分钟x60+秒</td>
</tr>
<tr>
<td><code>SEC_TO_TIME(seconds)</code></td>
<td>将 seconds 描述转化为包含小时、分钟和秒的时间</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT TIME_TO_SEC(&#x27;05:16:42&#x27;), SEC_TO_TIME(&#x27;19002&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2676c9b6eb72c184990c8e03a03ea6f1-bfb6159.png" alt="image-20220707131824120"></p>
<h4 id="计算日期和时间的函数"><a href="#计算日期和时间的函数" class="headerlink" title="计算日期和时间的函数"></a>计算日期和时间的函数</h4><ul>
<li><p><strong>date类型</strong></p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>DATE_ADD(datetime, INTERVAL expr  type)</code>，<code>ADDDATE(date,INTERVAL expr type)</code></td>
<td>返回与给定日期时间相差INTERVAL时间段的日期时间</td>
</tr>
<tr>
<td><code>DATE_SUB(date,INTERVAL expr type)</code>，  <code>SUBDATE(date,INTERVAL expr type) </code></td>
<td>返回与date相差INTERVAL时间间隔的日期</td>
</tr>
</tbody></table>
<p>  <code>type</code>的取值：</p>
<p>  <img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2ac627268b214c85dbe26d13f1f1debf-e7b59b0.png" alt="image-20220707133114760"></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">DATE_ADD(NOW(), INTERVAL 1 DAY) AS col1,</span><br><span class="line">DATE_ADD(&#x27;2021-10-21 23:32:12&#x27;,INTERVAL 1 SECOND) AS col2,</span><br><span class="line">ADDDATE(&#x27;2021-10-21 23:32:12&#x27;,INTERVAL 1 SECOND) AS col3,</span><br><span class="line">DATE_ADD(&#x27;2021-10-21 23:32:12&#x27;,INTERVAL &#x27;1_1&#x27; MINUTE_SECOND) AS col4,</span><br><span class="line">DATE_ADD(NOW(), INTERVAL -1 YEAR) AS col5, #可以是负数</span><br><span class="line">DATE_ADD(NOW(), INTERVAL &#x27;1_1&#x27; YEAR_MONTH) AS col6 #需要单引号</span><br></pre></td></tr></table></figure>

<p>  <img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/8826d8585990d50d863b4c21d91b0829-18acb61.png" alt="image-20220707133309139"></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">DATE_SUB(&#x27;2021-01-21&#x27;,INTERVAL 31 DAY) AS col1,</span><br><span class="line">SUBDATE(&#x27;2021-01-21&#x27;,INTERVAL 31 DAY) AS col2,</span><br><span class="line">DATE_SUB(&#x27;2021-01-21 02:01:01&#x27;,INTERVAL &#x27;1 1&#x27; DAY_HOUR) AS col3</span><br></pre></td></tr></table></figure>

<p>  <img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/97adfc0b78a3e2fb30f84839e4e07bd7-3a498c6.png" alt="image-20220707133349081"></p>
</li>
<li><p><strong>time类型</strong></p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ADDTIME(time1,time2)</code></td>
<td>返回time1加上time2的时间。当time2为一个数字时，代表的是秒，可以为负数</td>
</tr>
<tr>
<td><code>SUBTIME(time1,time2)</code></td>
<td>返回time1减去time2后的时间。当time2为一个数字时，代表的是秒，可以为负数</td>
</tr>
<tr>
<td><code>DATEDIFF(date1,date2)</code></td>
<td>返回date1 - date2的日期间隔天数</td>
</tr>
<tr>
<td><code>TIMEDIFF(time1, time2)</code></td>
<td>返回time1 - time2的时间间隔</td>
</tr>
<tr>
<td><code>FROM_DAYS(N)</code></td>
<td>返回从0000年1月1日起，N天以后的日期</td>
</tr>
<tr>
<td><code>TO_DAYS(date) </code></td>
<td>返回日期date距离0000年1月1日的天数</td>
</tr>
<tr>
<td><code>LAST_DAY(date)</code></td>
<td>返回date所在月份的最后一天的日期</td>
</tr>
<tr>
<td><code>MAKEDATE(year,n) </code></td>
<td>针对给定年份与所在年份中的天数返回一个日期</td>
</tr>
<tr>
<td><code>MAKETIME(hour,minute,second)</code></td>
<td>将给定的小时、分钟和秒组合成时间并返回</td>
</tr>
<tr>
<td><code>PERIOD_ADD(time,n</code>)</td>
<td>返回time加上n后的时间</td>
</tr>
</tbody></table>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">NOW(),					# 2022-07-07 05:41:32</span><br><span class="line">ADDTIME(NOW(),20),		# 2022-07-07 05:41:52</span><br><span class="line">SUBTIME(NOW(),30),		# 2022-07-07 05:41:02</span><br><span class="line">SUBTIME(NOW(),&#x27;1:1:3&#x27;),	# 2022-07-07 04:40:29</span><br><span class="line">DATEDIFF(NOW(),&#x27;2022-5-01&#x27;),	# 67</span><br><span class="line">TIMEDIFF(NOW(),&#x27;2022-5-25 22:10:10&#x27;),	# 838:59:59</span><br><span class="line">FROM_DAYS(366),			# 0001-01-01</span><br><span class="line">TO_DAYS(&#x27;0000-12-25&#x27;),	# 359</span><br><span class="line">LAST_DAY(NOW()),		# 2022-07-31</span><br><span class="line">MAKEDATE(YEAR(NOW()),12),		# 2022-01-12</span><br><span class="line">MAKETIME(10,21,23),		# 10:21:23</span><br><span class="line">PERIOD_ADD(20200101010101, 10)	# 13754718911</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="日期的格式化与解析"><a href="#日期的格式化与解析" class="headerlink" title="日期的格式化与解析"></a>日期的格式化与解析</h4><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>DATE_FORMAT(date,fmt)</code></td>
<td>按照字符串fmt格式化日期date值</td>
</tr>
<tr>
<td><code>TIME_FORMAT(time,fmt)</code></td>
<td>按照字符串fmt格式化时间time值</td>
</tr>
<tr>
<td><code>GET_FORMAT(date_type,format_type)</code></td>
<td>返回日期字符串的显示格式</td>
</tr>
<tr>
<td><code>STR_TO_DATE(str, fmt) </code></td>
<td>按照字符串fmt对str进行解析，解析为一个日期</td>
</tr>
</tbody></table>
<ul>
<li><p>fmt参数常用的格式符：</p>
<table>
<thead>
<tr>
<th><strong>格式符</strong></th>
<th><strong>说明</strong></th>
<th><strong>格式符</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>%Y</code></td>
<td>4位数字表示年份</td>
<td><code>%y</code></td>
<td>表示两位数字表示年份</td>
</tr>
<tr>
<td><code>%M  </code></td>
<td>月名表示月份（January,….）</td>
<td><code>%m</code></td>
<td>两位数字表示月份  （01,02,03。。。）</td>
</tr>
<tr>
<td><code>%b  </code></td>
<td>缩写的月名（Jan.，Feb.，….）</td>
<td><code>%c  </code></td>
<td>数字表示月份（1,2,3,…）</td>
</tr>
<tr>
<td><code>%D</code></td>
<td>英文后缀表示月中的天数  （1st,2nd,3rd,…）</td>
<td><code>%d</code></td>
<td>两位数字表示月中的天数(01,02…)</td>
</tr>
<tr>
<td><code>%e  </code></td>
<td>数字形式表示月中的天数  （1,2,3,4,5…..）</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>%H  </code></td>
<td>两位数字表示小数，24小时制  （01,02..）</td>
<td><code>%h</code> 和<code>%I</code></td>
<td>两位数字表示小时，12小时制  （01,02..）</td>
</tr>
<tr>
<td><code>%k</code></td>
<td>数字形式的小时，24小时制(1,2,3)</td>
<td><code>%l</code></td>
<td>数字形式表示小时，12小时制  （1,2,3,4….）</td>
</tr>
<tr>
<td><code>%i </code></td>
<td>两位数字表示分钟（00,01,02）</td>
<td><code>%S</code> 和<code>%s  </code></td>
<td>两位数字表示秒(00,01,02…)</td>
</tr>
<tr>
<td><code>%W</code></td>
<td>一周中的星期名称（Sunday…）</td>
<td><code>%a</code></td>
<td>一周中的星期缩写（Sun.，  Mon.,Tues.，..）</td>
</tr>
<tr>
<td><code>%w  </code></td>
<td>以数字表示周中的天数  (0=Sunday,1=Monday….)</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>%j</code></td>
<td>以3位数字表示年中的天数(001,002…)</td>
<td><code>%U  </code></td>
<td>以数字表示年中的第几周，  （1,2,3。。）其中Sunday为周中第一天</td>
</tr>
<tr>
<td><code>%u  </code></td>
<td>以数字表示年中的第几周，  （1,2,3。。）其中Monday为周中第一天</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>%T</code></td>
<td>24小时制</td>
<td><code>%r</code></td>
<td>12小时制</td>
</tr>
<tr>
<td><code>%p</code></td>
<td>AM或PM</td>
<td><code>%%</code></td>
<td>表示%</td>
</tr>
</tbody></table>
</li>
<li><p>GET_FORMAT函数中date_type和format_type参数取值如下：</p>
<p>  <img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/dbc51b202250a992a589b3437074dc3b-315443f.png" alt="image-20220707135101922"></p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">NOW(),</span><br><span class="line">DATE_FORMAT(NOW(), &#x27;%H:%i:%s&#x27;), </span><br><span class="line">STR_TO_DATE(&#x27;2014-04-22 15:47:06&#x27;,&#x27;%Y-%m-%d %H:%i:%s&#x27;),</span><br><span class="line">GET_FORMAT(DATE, &#x27;USA&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/456ebd13bfc0800684cf2dc37ee6034d-4a6f291.png" alt="image-20220707135301222"></p>
<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><p>流程处理函数可以根据不同的条件，执行不同的处理流程，可以在SQL语句中实现不同的条件选择。</p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>IF(value,value1,value2)</code></td>
<td>如果value的值为TRUE，返回value1，否则返回value2</td>
</tr>
<tr>
<td><code>IFNULL(value1, value2)</code></td>
<td>如果value1不为NULL，返回value1，否则返回value2</td>
</tr>
<tr>
<td><code>CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2  .... [ELSE resultn] END</code></td>
<td>相当于if…else if…else…</td>
</tr>
<tr>
<td><code>CASE expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 .... [ELSE 值n] END</code></td>
<td>相当于switch…case…</td>
</tr>
</tbody></table>
<h3 id="加密与解密函数"><a href="#加密与解密函数" class="headerlink" title="加密与解密函数"></a>加密与解密函数</h3><p>加密与解密函数主要用于对数据库中的数据进行加密和解密处理，以防止数据被他人窃取。这些函数在保证数据库安全时非常有用。</p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>PASSWORD(str)</code></td>
<td>返回字符串str的加密版本，41位长的字符串。加密结果不可逆，常用于用户的密码加密</td>
</tr>
<tr>
<td><code>MD5(str)</code></td>
<td>返回字符串str的md5加密后的值，也是一种加密方式。若参数为  NULL，则会返回NULL</td>
</tr>
<tr>
<td><code>SHA(str)</code></td>
<td>从原明文密码str计算并返回加密后的密码字符串，当参数为 NULL时，返回NULL。SHA加密算法比MD5更加安全。</td>
</tr>
<tr>
<td><code>ENCODE(value,password_seed)</code></td>
<td>返回使用password_seed作为加密密码加密value</td>
</tr>
<tr>
<td><code>DECODE(value,password_seed)</code></td>
<td>返回使用password_seed作为加密密码解密value</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">PASSWORD(&#x27;mysql&#x27;), PASSWORD(NULL), </span><br><span class="line">md5(&#x27;123&#x27;), SHA(&#x27;123&#x27;), </span><br><span class="line">ENCODE(&#x27;mysql&#x27;, &#x27;mysql&#x27;), DECODE(ENCODE(&#x27;mysql&#x27;,&#x27;mysql&#x27;),&#x27;mysql&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/2bdd5ec64f9c13ffaf7341cafe14574b-12192ff.png" alt="image-20220707135922748"></p>
<h3 id="MySQL信息函数"><a href="#MySQL信息函数" class="headerlink" title="MySQL信息函数"></a>MySQL信息函数</h3><p>MySQL中内置了一些可以查询MySQL信息的函数，这些函数主要用于帮助数据库开发或运维人员更好地对数据库进行维护工作。</p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>VERSION()</code></td>
<td>返回当前MySQL的版本号</td>
</tr>
<tr>
<td><code>CONNECTION_ID()</code></td>
<td>返回当前MySQL服务器的连接数</td>
</tr>
<tr>
<td><code>DATABASE()</code>，<code>SCHEMA()</code></td>
<td>返回MySQL命令行当前所在的数据库</td>
</tr>
<tr>
<td><code>USER()</code>，<code>CURRENT_USER()</code>、<br /><code>SYSTEM_USER()</code>，<code>SESSION_USER()</code></td>
<td>返回当前连接MySQL的用户名，返回结果格式为  “主机名@用户名”</td>
</tr>
<tr>
<td><code>CHARSET(value)</code></td>
<td>返回字符串value自变量的字符集</td>
</tr>
<tr>
<td><code>COLLATION(value)</code></td>
<td>返回字符串value的比较规则</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE(),SCHEMA(),VERSION(),CONNECTION_ID(), USER(), CURRENT_USER(), SYSTEM_USER(),SESSION_USER(),CHARSET(&#x27;ABC&#x27;),COLLATION(&#x27;ABC&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/58542c5e20c48f14bfac27dd34926c7c-26e92eb.png" alt="image-20220707140254594"></p>
<h3 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h3><p>MySQL中有些函数无法对其进行具体的分类，但是这些函数在MySQL的开发和运维过程中也是不容忽视的。</p>
<table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th><strong>用法</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>FORMAT(value,n) </code></td>
<td>返回对数字value进行格式化后的结果数据。n表示四舍五入后保留到小数点后n位</td>
</tr>
<tr>
<td><code>CONV(value,from,to) </code></td>
<td>将value的值进行不同进制之间的转换</td>
</tr>
<tr>
<td><code>INET_ATON(ipvalue)</code></td>
<td>将以点分隔的IP地址转化为一个数字</td>
</tr>
<tr>
<td><code>INET_NTOA(value)</code></td>
<td>将数字形式的IP地址转化为以点分隔的IP地址</td>
</tr>
<tr>
<td><code>BENCHMARK(n,expr)</code></td>
<td>将表达式expr重复执行n次。用于测试MySQL处理expr表达式所耗费的时间</td>
</tr>
<tr>
<td><code>CONVERT(value USING char_code)</code></td>
<td>将value所使用的字符编码修改为char_code</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT INET_ATON(&#x27;192.168.1.100&#x27;), INET_NTOA(3232235876), BENCHMARK(1000000, MD5(&#x27;mysql&#x27;))</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/ffd2f0fdd076e15166feb900c1237dbd-bce4fff.png" alt="image-20220707140632895"></p>
<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>约束是表级的强制规定。可以在创建表时规定约束（通过 CREATE TABLE 语句），或者在表创建之后通过 ALTER TABLE 语句规定约束。</p>
<p><strong>概念</strong>：约束是作用于表中字段上的规则，用于限制存储在表中的数据。</p>
<p><strong>目的</strong>：保证数据库中数据的正确、有效性和完整性。</p>
<p><strong>分类</strong>:</p>
<table>
<thead>
<tr>
<th>约束</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>限制该字段的数据不能为null</td>
<td>NOT  NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证该字段的所有数据都是唯一、不重复的</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一标识，要求非空且唯一</td>
<td>PRIMARY  KEY</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，如果未指定该字段的值，则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>检查约束(8.0.16版本后)</td>
<td>保证字段值满足某一个条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>外键约束</td>
<td>用来让两张表的数据之间建立连接，保证数据的一致性和完整性</td>
<td>FOREIGN KEY</td>
</tr>
</tbody></table>
<blockquote>
<p>注意：约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。</p>
</blockquote>
<h4 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h4><p><code>NOT NULL</code> , 限定某个字段/某列的值不允许为空</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">特点</span><br><span class="line">- 默认，所有的类型的值都可以是NULL，包括INT、FLOAT等数据类型</span><br><span class="line">- 非空约束只能出现在表对象的列上，只能某个列单独限定非空，不能组合非空</span><br><span class="line">- 一个表可以有很多列都分别限定了非空</span><br><span class="line">- 空字符串&#x27;&#x27;不等于NULL，0也不等于NULL</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 建表添加非空约束</span><br><span class="line">CREATE TABLE 表名称(</span><br><span class="line"> ...</span><br><span class="line"> 字段名 数据类型 NOT NULL, </span><br><span class="line"> ...</span><br><span class="line">);</span><br><span class="line">-- 添加非空约束</span><br><span class="line">alter table 表名称 modify 字段名 数据类型 not null;</span><br><span class="line">-- 删除非空约束</span><br><span class="line">alter table 表名称 modify 字段名 数据类型 NULL;#去掉not null，相当于修改字段，该字段允许为空</span><br><span class="line">alter table 表名称 modify 字段名 数据类型;#去掉not null，相当于修改某个非注解字段，该字段允许为空</span><br></pre></td></tr></table></figure>

<h4 id="唯一性约束"><a href="#唯一性约束" class="headerlink" title="唯一性约束"></a>唯一性约束</h4><p><code>UNIQUE</code> , 用来限制某个字段/某列的值不能重复</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">特点</span><br><span class="line">- 同一个表可以有多个唯一约束。</span><br><span class="line">- 唯一约束可以是某一个列的值唯一，也可以多个列组合的值唯一。</span><br><span class="line">- 唯一性约束允许列值为空。</span><br><span class="line">- 在创建唯一约束的时候，如果不给唯一约束命名，就默认和列名相同。</span><br><span class="line">- MySQL会给唯一约束的列上默认创建一个唯一索引。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时添加唯一约束</span><br><span class="line">create table 表名称(</span><br><span class="line"> ...</span><br><span class="line"> 字段名 数据类型  unique, </span><br><span class="line"> 字段名 数据类型  unique key,</span><br><span class="line"> ...</span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br><span class="line"> ...</span><br><span class="line"> 字段名 数据类型, </span><br><span class="line"> ... </span><br><span class="line"> [constraint 约束名] unique(字段名)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加唯一约束</span><br><span class="line">-- 字段列表中如果是一个字段，表示该列的值唯一。如果是两个或更多个字段，那么复合唯一，即多个字段的组合是唯一的</span><br><span class="line">alter table 表名称 add unique key(字段列表);	# 表级约束</span><br><span class="line">alter table 表名称 modify 字段名 字段类型 unique;  # 行级约束</span><br><span class="line"></span><br><span class="line">-- 删除唯一约束</span><br><span class="line">-- 删除唯一约束只能通过删除唯一索引的方式删除。</span><br><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;表名&#x27;; #查看都有哪些约束</span><br><span class="line">ALTER TABLE 表名称 DROP INDEX 唯一索引名;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：可以通过  <code>show index from 表名称;</code> 查看表的索引</p>
</blockquote>
<h4 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h4><p><code>PRIMARY KEY</code>, 用来唯一标识表中的一行记录。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">特点:</span><br><span class="line">- 主键约束相当于唯一约束+非空约束的组合，主键约束列不允许重复，也不允许出现空值。</span><br><span class="line">- 一个表最多只能有一个主键约束，建立主键约束可以在列级别创建，也可以在表级别上创建。</span><br><span class="line">- 主键约束对应着表中的一列或者多列（复合主键）</span><br><span class="line">- 如果是多列组合的复合主键约束，那么这些列都不允许为空值，并且组合的值不允许重复。</span><br><span class="line">- MySQL的主键名总是PRIMARY，就算自己命名了主键约束名也没用。</span><br><span class="line">- 当创建主键约束时，系统默认会在所在的列或列组合上建立对应的主键索引（能够根据主键查询的，就根据主键查询，效率更高）。如果删除主键约束了，主键约束对应的索引就自动删除了。</span><br><span class="line">- 需要注意的一点是，不要修改主键字段的值。因为主键是数据记录的唯一标识，如果修改了主键的值，就有可能会破坏数据的完整性。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时指定主键约束</span><br><span class="line">create table 表名称(</span><br><span class="line"> 字段名 数据类型  primary key, #列级模式</span><br><span class="line"> 字段名 数据类型, </span><br><span class="line"> 字段名 数据类型 </span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br><span class="line"> 字段名 数据类型,</span><br><span class="line"> 字段名 数据类型, </span><br><span class="line"> 字段名 数据类型,</span><br><span class="line"> [constraint 约束名] primary key(字段名) #表级模式</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 建表后增加主键约束</span><br><span class="line">ALTER TABLE 表名称 ADD PRIMARY KEY(字段列表); #字段列表可以是一个字段，也可以是多个字段，如果是多个字段的话，是复合主键</span><br><span class="line"></span><br><span class="line">-- 删除主键约束</span><br><span class="line">-- 说明：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存在。</span><br><span class="line">alter table 表名称 drop primary key;</span><br></pre></td></tr></table></figure>

<h4 id="自增列"><a href="#自增列" class="headerlink" title="自增列"></a>自增列</h4><p><code>AUTO_INCREMENT</code> , 某个字段的值自增</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">特点:</span><br><span class="line">- 一个表最多只能有一个自增长列</span><br><span class="line">- 当需要产生唯一标识符或顺序值时，可设置自增长</span><br><span class="line">- 自增长列约束的列必须是键列（主键列，唯一键列）</span><br><span class="line">- 自增约束的列的数据类型必须是整数类型</span><br><span class="line">- 如果自增列指定了 0 和 null，会在当前最大值的基础上自增；如果自增列手动指定了具体值，直接赋值为具体值。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时指定自增约束</span><br><span class="line">create table 表名称(</span><br><span class="line"> 字段名 数据类型  primary key auto_increment,</span><br><span class="line"> 字段名 数据类型,</span><br><span class="line"> 字段名 数据类型,</span><br><span class="line">);</span><br><span class="line">create table 表名称(</span><br><span class="line"> 字段名 数据类型,</span><br><span class="line"> 字段名 数据类型 unique key auto_increment, </span><br><span class="line"> 字段名 数据类型,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 建表后增加自增约束</span><br><span class="line">alter table 表名称 modify 字段名 数据类型 auto_increment;</span><br><span class="line"></span><br><span class="line">-- 删除自增约束</span><br><span class="line">alter table 表名称 modify 字段名 数据类型;  	#去掉auto_increment相当于删除</span><br></pre></td></tr></table></figure>

<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><p><code>FOREIGN KEY</code>, 用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。</p>
<p><strong>主表和从表/父表和子表</strong>:</p>
<ul>
<li>主表（父表）：被引用的表，被参考的表</li>
<li>从表（子表）：引用别人的表，参考别人的表</li>
</ul>
<p>例如：员工表的员工所在部门这个字段的值要参考部门表：部门表是主表，员工表是从表。<br>例如：学生表、课程表、选课表：选课表的学生和课程要分别参考学生表和课程表，学生表和课程表是<br>主表，选课表是从表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">特点:</span><br><span class="line">- 从表的外键列，必须引用/参考主表的主键或唯一约束的列</span><br><span class="line">	为什么？因为被依赖/被参考的值必须是唯一的</span><br><span class="line">- 在创建外键约束时，如果不给外键约束命名，默认名不是列名，而是自动产生一个外键名（例如student_ibfk_1），也可以指定外键约束名。</span><br><span class="line">- 创建(CREATE)表时就指定外键约束的话，先创建主表，再创建从表</span><br><span class="line">- 删表时，先删从表（或先删除外键约束），再删除主表</span><br><span class="line">- 当主表的记录被从表参照时，主表的记录将不允许删除，如果要删除数据，需要先删除从表中依赖该记录的数据，然后才可以删除主表的数据</span><br><span class="line">- 在“从表”中指定外键约束，并且一个表可以建立多个外键约束</span><br><span class="line">- 从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样，逻辑意义一致。如果类型不一样，创建子表时，就会出现错误“ERROR 1005 (HY000): Can&#x27;t create table&#x27;database.tablename&#x27;(errno: 150)”。</span><br><span class="line">	例如：都是表示部门编号，都是int类型。</span><br><span class="line">- 当创建外键约束时，系统默认会在所在的列上建立对应的普通索引。但是索引名是外键的约束名。（根据外键查询效率很高）</span><br><span class="line">- 删除外键约束后，必须手动删除对应的索引</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时指定外键约束</span><br><span class="line">create table 主表名称(</span><br><span class="line"> 字段1 数据类型  primary key,</span><br><span class="line"> 字段2 数据类型</span><br><span class="line">);</span><br><span class="line">create table 从表名称(</span><br><span class="line"> 字段1 数据类型,</span><br><span class="line"> 字段2 数据类型,</span><br><span class="line"> [CONSTRAINT &lt;外键约束名称&gt;] FOREIGN KEY（从表的某个字段) references 主表名(被参考字段)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 建表后增加外键约束</span><br><span class="line">ALTER TABLE 从表名 ADD [CONSTRAINT 约束名] FOREIGN KEY (从表的字段) REFERENCES 主表名(被引用字段) [on update xx][on delete xx];</span><br><span class="line"></span><br><span class="line">-- 删除外键约束(必须手动删除对应的索引)</span><br><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;表名称&#x27;;#查看某个表的约束名</span><br><span class="line">ALTER TABLE 从表名 DROP FOREIGN KEY 外键约束名;	# 删除外键约束</span><br><span class="line">SHOW INDEX FROM 表名称; #查看某个表的索引名</span><br><span class="line">ALTER TABLE 从表名 DROP INDEX 索引名;	# 删除外键约束对应索引</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong>：约束关系是针对双方的</p>
<ul>
<li>添加了外键约束后，主表的修改和删除数据受约束</li>
<li>添加了外键约束后，从表的添加和修改数据受约束</li>
<li>在从表上建立外键，要求主表必须存在</li>
<li>删除主表时，要求从表从表先删除，或将从表中外键引用该主表的关系先删除 </li>
</ul>
<h4 id="外键约束等级"><a href="#外键约束等级" class="headerlink" title="外键约束等级"></a>外键约束等级</h4><p>添加外键约束时, 提供可选参数 <code>[on update 约束等级][on delete 约束等级];</code>, 约束等级有以下几种:</p>
<ul>
<li><p><strong>Cascade</strong>方式 ：</p>
<p>在父表上update/delete记录时，同步update/delete掉子表的匹配记录</p>
</li>
<li><p><strong>Set null</strong>方式 ：</p>
<p>在父表上update/delete记录时，将子表上匹配记录的列设为null，但是要注意子表的外键列不能为not null</p>
</li>
<li><p><strong>No action</strong>方式 ：</p>
<p>如果子表中有匹配的记录，则不允许对父表对应候选键进行update/delete操作</p>
</li>
<li><p><strong>Restrict</strong>方式 ：</p>
<p>同no action， 都是立即检查外键约束</p>
</li>
<li><p><strong>Set default</strong>方式 : </p>
<p>父表有变更时，子表将外键列设置成一个默认的值，但Innodb不能识别 </p>
</li>
</ul>
<blockquote>
<p>如果没有指定等级，就相当于Restrict方式。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line"> did int primary key, 	#部门编号</span><br><span class="line"> dname varchar(50) 		#部门名称</span><br><span class="line">);</span><br><span class="line">create table emp(</span><br><span class="line"> eid int primary key,  	#员工编号</span><br><span class="line"> ename varchar(5),   	#员工姓名</span><br><span class="line"> deptid int, 			#员工所在的部门</span><br><span class="line"> foreign key (deptid) references dept(did)  on update cascade on delete set null</span><br><span class="line"> #把修改操作设置为级联修改等级，把删除操作设置为set null等级</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="默认值约束"><a href="#默认值约束" class="headerlink" title="默认值约束"></a>默认值约束</h4><p><code>DEFAULT</code> , 给某个字段/某列指定默认值，一旦设置默认值，在插入数据时，如果此字段没有显式赋值，则赋值为默认值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- 建表时给字段加默认值</span><br><span class="line">create table 表名称(</span><br><span class="line"> 字段名 数据类型  not null default 默认值,</span><br><span class="line">);</span><br><span class="line"># 说明：默认值约束一般不在唯一键和主键列上加</span><br><span class="line"></span><br><span class="line">-- 建表后给字段加默认值</span><br><span class="line">alter table 表名称 modify 字段名 数据类型 default 默认值;</span><br><span class="line"></span><br><span class="line">-- 删除默认值约束</span><br><span class="line">alter table 表名称 modify 字段名 数据类型 ;			#删除默认值约束，也不保留非空约束</span><br><span class="line">alter table 表名称 modify 字段名 数据类型  not null; 	#删除默认值约束，保留非空约束</span><br></pre></td></tr></table></figure>

<h3 id="约束使用"><a href="#约束使用" class="headerlink" title="约束使用"></a>约束使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">案例需求： 根据需求，完成表结构的创建。需求如下</span><br><span class="line">字段名		字段含义	字段类型			约束条件			约束关键字</span><br><span class="line">id		ID唯一标识		int			主键，并且自动增长		  PRIMARY KEY,AUTO_INCREMENT</span><br><span class="line">name	姓名			varchar(10)	  不为空，并且唯一			NOT NULL , UNIQUE</span><br><span class="line">age		年龄			int	</span><br><span class="line">status	状态			char(1)		  如果没有指定该值，默认为1	 DEFAULT</span><br><span class="line">gender	性别			char(1)		        </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 建表语句</span><br><span class="line">CREATE TABLE tb_user(</span><br><span class="line">	id int AUTO_INCREMENT PRIMARY KEY COMMENT &#x27;ID唯一标识&#x27;,</span><br><span class="line">	name varchar(10) NOT NULL UNIQUE COMMENT &#x27;姓名&#x27; ,</span><br><span class="line">	age int  COMMENT &#x27;年龄&#x27; ,</span><br><span class="line">	status char(1) default &#x27;1&#x27; COMMENT &#x27;状态&#x27;,</span><br><span class="line">	gender char(1) COMMENT &#x27;性别&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>查看某个表已有的约束:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;表名称&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/06eeda1896341f336de56c9d2d479af3-59d544a.png" alt="image-20220707180448064"></p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><h3 id="等值连接-非等值连接"><a href="#等值连接-非等值连接" class="headerlink" title="等值连接/非等值连接"></a>等值连接/非等值连接</h3><ul>
<li><p><strong>等值连接</strong></p>
<p>关联条件为相等关系的多表查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工信息及部门信息</span><br><span class="line">SELECT emp.employee_id,dept.department_name,emp.department_id</span><br><span class="line">FROM employees emp,departments dept</span><br><span class="line">WHERE emp.`department_id` = dept.department_id;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>非等值连接</strong></p>
<p>关联条件为其他关系的多表查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工的工资等级</span><br><span class="line">SELECT e.last_name,e.salary,j.grade_level</span><br><span class="line">FROM employees e,job_grades j</span><br><span class="line">where e.`salary` BETWEEN j.`lowest_sal` AND j.`highest_sal`;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><p>关联条件为同一个表的不同字段的多表查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工id,员工姓名及其管理者的id和姓名</span><br><span class="line">SELECT emp.employee_id,emp.last_name,mgr.employee_id,mgr.last_name</span><br><span class="line">FROM employees emp ,employees mgr</span><br><span class="line">WHERE emp.`manager_id` = mgr.`employee_id`;</span><br></pre></td></tr></table></figure>

<h3 id="内连接-外连接"><a href="#内连接-外连接" class="headerlink" title="内连接/外连接"></a>内连接/外连接</h3><ul>
<li><p><strong>内连接</strong></p>
<p>多表查询结果集中不包含一个表与另一个表不匹配的行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工信息及部门信息(隐式内连接)</span><br><span class="line">SELECT employee_id,department_name</span><br><span class="line">FROM employees e,departments d</span><br><span class="line">WHERE e.`department_id` = d.department_id;</span><br><span class="line"></span><br><span class="line">-- 或使用INNER JOIN 实现同样的需求(显示内连接)</span><br><span class="line">SELECT employee_id,department_name</span><br><span class="line">FROM employees e INNER JOIN departments d</span><br><span class="line">ON e.`department_id` = d.department_id;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>外连接</strong></p>
<p>多表查询结果集中除了包含一个表与另一个表匹配的行之外的行数据, 包含<strong>左外连接</strong>和<strong>右外连接</strong></p>
<ul>
<li><p><strong>左外连接</strong></p>
<p>两个表在连接过程中除了返回满足连接条件的行以外, 还返回左表中不满足条件的行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 所有 的员工的last_name,department_name信息 </span><br><span class="line">SELECT employee_id,department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.department_id;</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/c614c7ec461a46bff9711fe282da7aa7-b65701c.png" alt="image-20220706175720567"></p>
<blockquote>
<p>左表与右表不匹配, 默认赋值为Null</p>
</blockquote>
</li>
<li><p><strong>右外连接</strong></p>
<p>两个表在连接过程中除了返回满足连接条件的行以外, 还返回右表中不满足条件的行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 所有 的部门的last_name,department_name信息 </span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM employees e RIGHT OUTER JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure>

<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/34de1b0cfa18f40716059232a78abc6e-ddbf100.png" alt="image-20220706175904303"></p>
<blockquote>
<p>某些部门没有员工, 即右表与左表不匹配, 默认赋值为Null</p>
</blockquote>
</li>
<li><p><strong>满外连接</strong></p>
<p><strong>满外连接</strong>的结果 = 左右表匹配的数据 + 左表没有匹配到的数据 + 右表没有匹配到的数据。<br>SQL99是支持满外连接的。使用<code>FULL JOIN</code> 或 <code>FULL OUTER JOIN</code>来实现。<br>需要注意的是，<strong>MySQL不支持FULL JOIN</strong>，但是可以用 <code>LEFT JOIN UNION RIGHT join</code>代替。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT employee_id,department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT employee_id,department_name</span><br><span class="line">FROM employees e RIGHT JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">WHERE e.`department_id` IS NULL;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="UNION使用"><a href="#UNION使用" class="headerlink" title="UNION使用"></a>UNION使用</h3><p><strong>UNION</strong> 用于合并查询结果.</p>
<p>利用<code>UNION</code>关键字，可以给出多条SELECT语句，并将它们的结果组合成单个结果集。合并时，两个表对应的列数和数据类型必须相同，并且相互对应。各个SELECT语句之间使用<code>UNION</code>或<code>UNION ALL</code>关键字分隔。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 语法格式</span><br><span class="line">SELECT column,... FROM table1</span><br><span class="line">UNION [ALL]</span><br><span class="line">SELECT column,... FROM table2</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>UNION</strong></p>
<p><code>UNION</code> 操作符返回两个查询的结果集的并集，去除重复记录。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/0d33119ab35af3c54266157e3f6d7e46-685723f.png" alt="image-20220706180626678"></p>
</li>
</ul>
<ul>
<li><p><strong>UNION ALL</strong></p>
<p><code>UNION ALL</code>操作符返回两个查询的结果集的并集。对于两个结果集的重复部分，不去重</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/c138fdc2c606340c06eba10ffd3f19f3-b87c761.png" alt="image-20220706180704144"></p>
</li>
</ul>
<blockquote>
<p>注意：执行<code>UNION ALL</code>语句时所需要的资源比<code>UNION</code>语句少。如果明确知道合并数据后的结果数据不存在重复数据，或者不需要去除重复的数据，则尽量使用<code>UNION ALL</code>语句，以提高数据查询的效率</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询中国用户中男性的信息以及美国用户中年男性的用户信息</span><br><span class="line">SELECT id,cname FROM t_cnmale WHERE csex=&#x27;男&#x27;</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT id,tname FROM t_usmale WHERE tGender=&#x27;male&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="7种-JOINS的实现"><a href="#7种-JOINS的实现" class="headerlink" title="7种 JOINS的实现"></a>7种 JOINS的实现</h3><p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/d1f150388b55b7629b82c24fe51f6852-f0d198f.png" alt="image-20220706181002857"></p>
<h3 id="自然连接"><a href="#自然连接" class="headerlink" title="自然连接"></a>自然连接</h3><p>SQL99 在 SQL92 的基础上提供了一些特殊语法，比如  <code>NATURAL JOIN</code> 用来表示<strong>自然连接</strong>。我们可以把自然连接理解为的等值连接。它会帮你<strong>自动查询</strong>两张连接表中 <strong>所有相同的字段</strong> ，然后进行 <strong>等值连接</strong> 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 下面两句SQL执行结果是一样的</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e NATURAL JOIN departments d;</span><br><span class="line"></span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">ON e.`department_id` = d.`department_id`</span><br><span class="line">AND e.`manager_id` = d.`manager_id`;</span><br></pre></td></tr></table></figure>

<h3 id="USING"><a href="#USING" class="headerlink" title="USING"></a>USING</h3><p>当多表进行连接的时候，还支持使用 <code>USING</code> 指定数据表里的 <strong>同名字段</strong> 进行等值连接。但是<strong>只能配合JOIN</strong>一起使用。比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 下面两句SQL执行结果是一样的</span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">USING (department_id);</span><br><span class="line"></span><br><span class="line">SELECT employee_id,last_name,department_name</span><br><span class="line">FROM employees e ,departments d</span><br><span class="line">WHERE e.department_id = d.department_id;</span><br></pre></td></tr></table></figure>

<h3 id="多表连接注意"><a href="#多表连接注意" class="headerlink" title="多表连接注意"></a>多表连接注意</h3><p>要 <strong>控制连接表的数量</strong> 。多表连接就相当于嵌套 for 循环一样，非常消耗资源，会让 SQL 查询性能下降得很严重，因此不要连接不必要的表。在许多 DBMS 中，也都会有最大连接表的限制。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【强制】超过三个表禁止 join。需要 join 的字段，数据类型保持绝对一致；多表关联查询时， 保</span><br><span class="line">证被关联的字段需要有索引。</span><br><span class="line">说明：即使双表 join 也要注意表索引、SQL 性能。</span><br></pre></td></tr></table></figure>

<h3 id="多表查询示例"><a href="#多表查询示例" class="headerlink" title="多表查询示例"></a>多表查询示例</h3><p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/db8ddca1f2e68a9171a6e36ad4be0e71-30f5961.png" alt="image-20220706190420600"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">-- 1.显示所有员工的姓名，部门号和部门名称。</span><br><span class="line">SELECT CONCAT(e.first_name, &#x27;.&#x27;, e.last_name) ename, d.department_id, d.department_name</span><br><span class="line">FROM employees e </span><br><span class="line">LEFT JOIN departments d USING(department_id)</span><br><span class="line"></span><br><span class="line">-- 2.查询90号部门员工的job_id和90号部门的location_id</span><br><span class="line">SELECT e.job_id,d.location_id</span><br><span class="line">FROM employees e </span><br><span class="line">RIGHT JOIN departments d USING(department_id) </span><br><span class="line">WHERE d.department_id = 90;</span><br><span class="line"></span><br><span class="line">-- 3.查询所有有奖金的员工的 last_name , department_name , location_id , city</span><br><span class="line">SELECT e.last_name,d.department_name,l.location_id,l.city</span><br><span class="line">FROM employees e </span><br><span class="line">LEFT JOIN departments d USING(department_id) </span><br><span class="line">LEFT JOIN locations l USING (location_id)</span><br><span class="line">WHERE e.commission_pct IS NOT NULL;</span><br><span class="line"></span><br><span class="line">-- 4.选择city在Toronto工作的员工的 last_name , job_id , department_id , department_name</span><br><span class="line">SELECT e.last_name,e.job_id,d.department_name,d.department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d USING(department_id) </span><br><span class="line">LEFT JOIN locations l USING (location_id)</span><br><span class="line">WHERE l.city = &#x27;Toronto&#x27;;</span><br><span class="line"></span><br><span class="line">-- 6.选择指定员工的姓名，员工号，以及他的管理者的姓名和员工号，结果类似于下面的格式</span><br><span class="line">-- employees 	Emp# 		manager 		Mgr#</span><br><span class="line">-- kochhar 		101 		king 				100</span><br><span class="line">SELECT e.last_name employees, e.employee_id &#x27;Emp#&#x27;, m.last_name manager, m.employee_id &#x27;Mgr#&#x27;</span><br><span class="line">FROM employees e</span><br><span class="line">LEFT JOIN employees m</span><br><span class="line">ON e.manager_id = m.employee_id;</span><br><span class="line"></span><br><span class="line">-- 7.查询哪些部门没有员工</span><br><span class="line">SELECT e.employee_id,d.department_id,d.department_name</span><br><span class="line">FROM employees e RIGHT JOIN departments d USING(department_id) </span><br><span class="line">WHERE e.employee_id IS NULL;</span><br><span class="line"></span><br><span class="line">-- 8. 查询哪个城市没有部门</span><br><span class="line">SELECT l.city, d.department_id</span><br><span class="line">FROM locations l</span><br><span class="line">LEFT JOIN departments d USING(location_id)</span><br><span class="line">WHERE d.department_id IS NULL;</span><br></pre></td></tr></table></figure>

<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p>SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2 ); </span><br></pre></td></tr></table></figure>

<p>子查询外部的语句可以是INSERT / UPDATE / DELETE / SELECT 的任何一个。</p>
<h3 id="子查询分类"><a href="#子查询分类" class="headerlink" title="子查询分类"></a>子查询分类</h3><p>根据<strong>子查询结果</strong>不同，分为：</p>
<ul>
<li><p><strong>标量子查询</strong>  (子查询结果为单个值）</p>
<p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询称为标量子查询。</p>
<blockquote>
<p>常用的操作符：<code>= </code>  <code>&lt;&gt;</code>   <code>&gt;</code>   <code>&gt;=</code>   <code>&lt;</code>   <code>&lt;=</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 &quot;销售部&quot; 的所有员工信息</span><br><span class="line">select * from emp where dept_id = (select id from dept where name = &#x27;销售部&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询在 &quot;Hunold&quot; 入职之后的员工信息</span><br><span class="line">select * from emp where entrydate &gt; (select entrydate from emp where name = &#x27;Hunold&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>列子查询</strong>  (子查询结果为一列)</p>
<p>子查询返回的结果是一列（可以是多行），这种子查询称为列子查询。</p>
<p>常用操作符:</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IN</td>
<td>在指定的集合范围之内，多选一</td>
</tr>
<tr>
<td>NOT IN</td>
<td>不在指定的集合范围之内</td>
</tr>
<tr>
<td>ANY</td>
<td>子查询返回列表中，有任意一个满足即可</td>
</tr>
<tr>
<td>SOME</td>
<td>与ANY等同，使用SOME的地方都可以使用ANY</td>
</tr>
<tr>
<td>ALL</td>
<td>子查询返回列表的所有值都必须满足</td>
</tr>
</tbody></table>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询 &quot;销售部&quot; 和 &quot;市场部&quot; 的所有员工信息</span><br><span class="line">select * from emp where dept_id </span><br><span class="line">in (select id from dept where name = &#x27;销售部&#x27; or name = &#x27;市场部&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询比 &quot;财务部&quot; 所有人工资都高的员工信息</span><br><span class="line">select * from emp where salary </span><br><span class="line">&gt; all ( </span><br><span class="line">    select salary from emp where dept_id =(select id from dept where name = &#x27;财务部&#x27;) </span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>行子查询</strong>  (子查询结果为一行)</p>
<p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。</p>
<blockquote>
<p>常用的操作符：<code>= </code>、<code>&lt;&gt;</code> 、<code>IN</code> 、<code>NOT IN</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询与 &quot;Hunold&quot; 的薪资及直属领导相同的员工信息 ;</span><br><span class="line">select * from emp where (salary,managerid) = (select salary, managerid from emp where name = &#x27;Hunold&#x27;) and name != &#x27;Hunold&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>表子查询</strong>  (子查询结果为多行多列)</p>
<p>子查询返回的结果是多行多列，这种子查询称为表子查询。</p>
<blockquote>
<p>常用的操作符：<code>IN </code> </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 查询与 &quot;Lex&quot; , &quot;David&quot; 的职位和薪资相同的员工信息</span><br><span class="line">select * from emp where (job,salary) in ( select job, salary from emp where name =&#x27;Lex&#x27; or name = &#x27;David&#x27; );</span><br><span class="line"></span><br><span class="line">-- 查询入职日期是 &quot;2006-01-01&quot; 之后的员工信息 , 及其部门信息</span><br><span class="line">select e.*, d.* from (select * from emp where entrydate &gt; &#x27;2006-01-01&#x27;) e left join dept d on e.dept_id = d.id ;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>按<strong>内查询是否被执行多次</strong>，将子查询划分为 <strong>相关(或关联)子查询</strong> 和 <strong>不相关(或非关联)子查询</strong> 。</p>
<ul>
<li><p>关联子查询</p>
<p>如果子查询需要执行多次，即采用循环的方式，先从外部查询开始，每次都传入子查询进行查询，然后再将结果反馈给外部，这种嵌套的执行方式就称为相关子查询。</p>
</li>
<li><p>非关联子查询 </p>
<p>子查询从数据表中查询了数据结果，如果这个数据结果只执行一次，然后这个数据结果作为主查询的条件进行执行，那么这样的子查询叫做不相关子查询。</p>
</li>
</ul>
<h3 id="相关子查询"><a href="#相关子查询" class="headerlink" title="相关子查询"></a>相关子查询</h3><p>如果子查询的执行依赖于外部查询，通常情况下都是因为<strong>子查询中的表用到了外部的表</strong>，并进行了<strong>条件关联</strong>，因此每执行一次外部查询，子查询都要<strong>重新计算</strong>一次，这样的子查询就称之为 <strong>关联子查询</strong> 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工中工资大于本部门平均工资的员工的last_name,salary和其department_id</span><br><span class="line"></span><br><span class="line">-- 方式一：相关子查询</span><br><span class="line">SELECT e.last_name,e.salary,e.department_id FROM employees e </span><br><span class="line">WHERE e.salary &gt; </span><br><span class="line">	(SELECT AVG(salary) FROM employees WHERE department_id = e.department_id);</span><br><span class="line"></span><br><span class="line">-- 方式二：在 FROM 中使用子查询</span><br><span class="line">SELECT e1.last_name,e1.salary,e1.department_id </span><br><span class="line">FROM employees e1,</span><br><span class="line">	(SELECT department_id,AVG(salary) dept_avg_sal </span><br><span class="line">    FROM employees </span><br><span class="line">    GROUP BY department_id) e2</span><br><span class="line">WHERE e1.`department_id` = e2.department_id AND e2.dept_avg_sal &lt; e1.`salary`;</span><br></pre></td></tr></table></figure>

<h4 id="EXISTS-与-NOT-EXISTS关键字"><a href="#EXISTS-与-NOT-EXISTS关键字" class="headerlink" title="EXISTS 与 NOT EXISTS关键字"></a><code>EXISTS</code> 与 <code>NOT EXISTS</code>关键字</h4><ul>
<li>关联子查询通常也会和 EXISTS操作符一起来使用，用来检查在子查询中是否存在满足条件的行。</li>
<li>如果在子查询中<strong>不存在</strong>满足条件的行：<ul>
<li>条件返回 FALSE</li>
<li>继续在子查询中查找</li>
</ul>
</li>
<li>如果在子查询中<strong>存在</strong>满足条件的行：<ul>
<li>不在子查询中继续查找</li>
<li>条件返回 TRUE</li>
</ul>
</li>
<li>NOT EXISTS关键字表示如果不存在某种条件，则返回TRUE，否则返回FALSE。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询公司管理者的employee_id，last_name，job_id，department_id信息</span><br><span class="line">SELECT e1employee_id, e1last_name, e1job_id, e1department_id</span><br><span class="line">FROM  employees e1</span><br><span class="line">WHERE EXISTS ( SELECT * FROM  employees e2 WHERE e2.manager_id = e1.employee_id);</span><br><span class="line"></span><br><span class="line">-- 查询departments表中，不存在于employees表中的部门的department_id和department_name</span><br><span class="line">SELECT department_id, department_name</span><br><span class="line">FROM departments d</span><br><span class="line">WHERE NOT EXISTS (SELECT &#x27;X&#x27; FROM  employees WHERE department_id = d.department_id);</span><br></pre></td></tr></table></figure>

<h4 id="相关更新"><a href="#相关更新" class="headerlink" title="相关更新"></a>相关更新</h4><p>使用相关子查询依据一个表中的数据更新另一个表的数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table1 alias1</span><br><span class="line">SET column = (SELECT expression FROM  table2 alias2 WHERE alias1.column = alias2.column);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 在employees中增加一个department_name字段，数据为员工对应的部门名称</span><br><span class="line">UPDATE employees e</span><br><span class="line">SET department_name = </span><br><span class="line">(SELECT department_name FROM departments d WHERE e.department_id = d.department_id);</span><br></pre></td></tr></table></figure>

<h4 id="相关删除"><a href="#相关删除" class="headerlink" title="相关删除"></a>相关删除</h4><p>使用相关子查询依据一个表中的数据删除另一个表的数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM table1 alias1</span><br><span class="line">WHERE column operator </span><br><span class="line">(SELECT expression FROM  table2 alias2 WHERE alias1.column = alias2.column);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 删除表employees中，其与emp_history表皆有的数据</span><br><span class="line">DELETE FROM employees e</span><br><span class="line">WHERE e.employee_id in (SELECT employee_id FROM emp_history);</span><br></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p><strong>事务</strong> 是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p>
<h3 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h3><ul>
<li><p><strong>控制事务一</strong></p>
<p>查看/设置事务提交方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询当前事务提交方式</span><br><span class="line">SELECT @@autocommit;</span><br><span class="line">-- 设置为手动提交</span><br><span class="line">SET @@autocommit = 0;	</span><br></pre></td></tr></table></figure>

<p>提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>

<p>回滚事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：上述的这种方式是修改了事务的自动提交行为, 把默认的自动提交修改为了手动提交, 此时执行的DML语句都不会提交, 需要手动的执行commit进行提交。</p>
</blockquote>
</li>
<li><p><strong>控制事务二</strong></p>
<p>开启事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">START TRANSACTION;</span><br><span class="line">-- 或 </span><br><span class="line">BEGIN; </span><br></pre></td></tr></table></figure>

<p>提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMIT; </span><br></pre></td></tr></table></figure>

<p>回滚事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<p>示例: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 开启事务</span><br><span class="line">start transaction</span><br><span class="line"></span><br><span class="line">-- 1. 查询张三余额</span><br><span class="line">select * from account where name = &#x27;张三&#x27;;</span><br><span class="line"></span><br><span class="line">-- 2. 张三的余额减少1000</span><br><span class="line">update account set money = money - 1000 where name = &#x27;张三&#x27;;</span><br><span class="line"></span><br><span class="line">-- 3. 李四的余额增加1000</span><br><span class="line">update account set money = money + 1000 where name = &#x27;李四&#x27;;</span><br><span class="line"></span><br><span class="line">-- 如果正常执行完毕, 则提交事务</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line">-- 如果执行过程中报错, 则回滚事务</span><br><span class="line">-- rollback;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="事务四大特性"><a href="#事务四大特性" class="headerlink" title="事务四大特性"></a>事务四大特性</h3><p>事务的四大特性，简称<strong>ACID</strong>。</p>
<ul>
<li><strong>原子性</strong>（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。</li>
<li><strong>一致性</strong>（Consistency）：事务完成时，必须使所有的数据都保持一致状态。</li>
<li><strong>隔离性</strong>（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。</li>
<li><strong>持久性</strong>（Durability）：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。</li>
</ul>
<h3 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h3><p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/e8a93d8e3554ac398a5beed445dac42b-58499ec.png" alt="image-20220714142522324"></p>
<h4 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h4><p>一个事务读到另外一个事务还没有提交的数据。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/a2cc0340f66205bce44c8b152ab96eb8-cd17406.png" alt="image-20220714143052165"></p>
<h4 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h4><p>一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/19a214c3ca1f8f45c1ca7c330b321f0f-58b7eaa.png"></p>
<h4 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h4><p>一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了 “幻影”。</p>
<p><img src="https://ni9ne.oss-cn-shanghai.aliyuncs.com/mdimg/c5566878b8fb3db9274efea9a3300d06-f7e2dfe.png" alt="image-20220714143140146"></p>
<h3 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h3><p>为了解决并发事务所引发的问题，在数据库中引入了<strong>事务隔离级别</strong>。主要有以下几种：</p>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td><strong>未提交度</strong> Read Uncommitted</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td><strong>已提交读</strong> Read Committed</td>
<td>×</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td><strong>可重复读</strong> Repeatable Read(默认)</td>
<td>×</td>
<td>×</td>
<td>√</td>
</tr>
<tr>
<td><strong>序列化</strong> Serializable</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody></table>
<p>查看事务隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@transaction_isolation;</span><br></pre></td></tr></table></figure>

<p>设置事务隔离级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123; READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：事务隔离级别越高，数据越安全，但是性能越低。</p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>NI9NE
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://ni9ne.github.io/2022/07/12/MySql/MySQL%E5%9F%BA%E7%A1%80/" title="MySQL基础">https://ni9ne.github.io/2022/07/12/MySql/MySQL基础/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"># MySQL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/05/22/Redis/Redis%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%E5%8F%8A%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" rel="prev" title="Redis使用技巧及最佳实践">
                  <i class="fa fa-chevron-left"></i> Redis使用技巧及最佳实践
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/07/12/MySql/MySQL%E8%BF%9B%E9%98%B6/" rel="next" title="MySQL进阶">
                  MySQL进阶 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">NI9NE</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  
<script src="https://unpkg.com/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
